define("require exports jquery w2ui socket common tree editor variables explorer profiler status problem".split(" "),function(I,m,z,t,n,A,r,d,k,u,B,C,D){(function(e){function m(a,b,c){a=JSON.parse(c);f={};p();k.VariableManager.clearVariables();B.Profiler.clearProfiler();q();C.StatusPanel.showProcessStatus(a.resource,a.process,a.debug)}function v(a,b,f){null!=c&&c.process==f&&w()}function w(){f={};p();d.FileEditor.clearEditorHighlights();D.ProblemManager.highlightProblems();k.VariableManager.clearVariables();
q()}function q(){p();t.w2ui.threads.records=[];t.w2ui.threads.refresh();z("#process").html("")}function E(a,b,e){a=JSON.parse(e);b=a.thread==a.thread?"SUSPENDED"!=a.status:!1;if(b)p(),l(a),d.FileEditor.clearEditorHighlights();else if(c.thread==a.thread){a:{if(c.thread==a.thread&&"SUSPENDED"==a.status){if(c.key!=a.key){b=!0;break a}if(c.change!=a.change){b=!0;break a}}b=!1}b&&(F(a),l(a))}else null==c.thread?(G(a),l(a)):(b=f[a.thread],(null!=b&&null!=a?b.thread!=a.thread||b.status!=a.status||b.resource!=
a.resource||b.line!=a.line:b!=a)&&l(a));f[a.thread]=a;x(a)}function x(a){var b=d.FileEditor.currentEditorState();c.thread==a.thread&&b.getResource().getFilePath()==a.resource&&"SUSPENDED"==a.status&&d.FileEditor.createEditorHighlight(a.line,"threadHighlight")}function l(a){f[a.thread]=a;y();k.VariableManager.showVariables()}function F(a){if(c.thread==a.thread&&c.line!=a.line)if(H(a)){var b=r.FileTree.createResourcePath(a.resource);u.FileExplorer.openTreeFile(b.getResourcePath(),function(){h(a);d.FileEditor.showEditorLine(a.line)})}else h(a),
d.FileEditor.showEditorLine(a.line);else h(a)}function G(a){if(d.FileEditor.currentEditorState().getResource().getFilePath()!=a.resource){var b=r.FileTree.createResourcePath(a.resource);u.FileExplorer.openTreeFile(b.getResourcePath(),function(){h(a);d.FileEditor.showEditorLine(a.line)})}else h(a),d.FileEditor.showEditorLine(a.line)}function H(a){return c.thread==a.thread?d.FileEditor.currentEditorState().getResource().getFilePath()!=a.resource:!1}function p(){k.VariableManager.clearVariables();c=
{thread:null,process:null,resource:null,change:-1,line:-1,key:-1}}function h(a){c={thread:a.thread,process:a.process,resource:a.resource,line:a.line,change:a.change,key:a.key};l(a)}function y(){var a=[],b=1,d;for(d in f)if(f.hasOwnProperty(d)){var g=f[d],e="threadSuspended",h="\x26nbsp;\x3cinput type\x3d'radio'\x3e";x(g);"SUSPENDED"!=g.status?e="threadRunning":c.thread==g.thread&&(h="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e");var e="\x3cdiv title\x3d'"+g.stack+"' class\x3d'"+e+"'\x3e"+d+"\x3c/div\x3e",
k=r.FileTree.createResourcePath(g.resource);a.push({recid:b++,name:e,thread:d,status:g.status,active:h,instruction:g.instruction,variables:g.variables,resource:g.resource,key:g.key,line:g.line,script:k.getResourcePath()})}A.Common.updateTableRecords(a,"threads")}var f={},c={};e.createThreads=function(){n.EventBus.createRoute("BEGIN",m,q);n.EventBus.createRoute("SCOPE",E,k.VariableManager.clearVariables);n.EventBus.createRoute("TERMINATE",v);n.EventBus.createRoute("EXIT",v)};e.terminateThreads=w;e.clearThreads=
q;e.focusedThread=function(){return null!=c.thread?f[c.thread]:null};e.updateThreadFocusByName=function(a){h(f[a])};e.focusedThreadVariables=function(){if(null!=c.thread){var a=f[c.thread];if(null!=a)return a.variables}return{}};e.focusedThreadEvaluation=function(){if(null!=c.thread){var a=f[c.thread];if(null!=a)return a.evaluation}return{}};e.showThreads=y})(m.ThreadManager||(m.ThreadManager={}))});
