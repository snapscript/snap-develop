define("require exports jquery w2ui socket common tree editor variables explorer profiler status".split(" "),function(H,m,z,t,n,A,r,e,k,u,B,C){(function(d){function m(a,b,c){a=JSON.parse(c);f={};p();k.VariableManager.clearVariables();B.Profiler.clearProfiler();q();C.StatusPanel.showProcessStatus(a.resource,a.process,a.debug)}function v(a,b,e){null!=c&&c.process==e&&w()}function w(){f={};p();e.FileEditor.clearEditorHighlights();k.VariableManager.clearVariables();q()}function q(){p();t.w2ui.threads.records=
[];t.w2ui.threads.refresh();z("#process").html("")}function D(a,b,d){a=JSON.parse(d);e.FileEditor.loadEditor();b=a.thread==a.thread?"SUSPENDED"!=a.status:!1;if(b)p(),l(a),e.FileEditor.clearEditorHighlights();else if(c.thread==a.thread){a:{if(c.thread==a.thread&&"SUSPENDED"==a.status){if(c.key!=a.key){b=!0;break a}if(c.change!=a.change){b=!0;break a}}b=!1}b&&(E(a),l(a))}else null==c.thread?(F(a),l(a)):(b=f[a.thread],(null!=b&&null!=a?b.thread!=a.thread||b.status!=a.status||b.resource!=a.resource||
b.line!=a.line:b!=a)&&l(a));f[a.thread]=a;x(a)}function x(a){var b=e.FileEditor.loadEditor();c.thread==a.thread&&b.resource.filePath==a.resource&&"SUSPENDED"==a.status&&e.FileEditor.createEditorHighlight(a.line,"threadHighlight")}function l(a){f[a.thread]=a;y();k.VariableManager.showVariables()}function E(a){if(c.thread==a.thread&&c.line!=a.line)if(G(a)){var b=r.FileTree.createResourcePath(a.resource);u.FileExplorer.openTreeFile(b.resourcePath,function(){g(a);e.FileEditor.showEditorLine(a.line)})}else g(a),
e.FileEditor.showEditorLine(a.line);else g(a)}function F(a){if(e.FileEditor.loadEditor().resource.filePath!=a.resource){var b=r.FileTree.createResourcePath(a.resource);u.FileExplorer.openTreeFile(b.resourcePath,function(){g(a);e.FileEditor.showEditorLine(a.line)})}else g(a),e.FileEditor.showEditorLine(a.line)}function G(a){return c.thread==a.thread?e.FileEditor.loadEditor().resource.filePath!=a.resource:!1}function p(){k.VariableManager.clearVariables();c={thread:null,process:null,resource:null,change:-1,
line:-1,key:-1}}function g(a){c={thread:a.thread,process:a.process,resource:a.resource,line:a.line,change:a.change,key:a.key};l(a)}function y(){e.FileEditor.loadEditor();var a=[],b=1,d;for(d in f)if(f.hasOwnProperty(d)){var h=f[d],g="threadSuspended",k="\x26nbsp;\x3cinput type\x3d'radio'\x3e";x(h);"SUSPENDED"!=h.status?g="threadRunning":c.thread==h.thread&&(k="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e");var g="\x3cdiv title\x3d'"+h.stack+"' class\x3d'"+g+"'\x3e"+d+"\x3c/div\x3e",l=r.FileTree.createResourcePath(h.resource);
a.push({recid:b++,name:g,thread:d,status:h.status,active:k,instruction:h.instruction,variables:h.variables,resource:h.resource,key:h.key,line:h.line,script:l.resourcePath})}A.Common.updateTableRecords(a,"threads")}var f={},c={};d.createThreads=function(){n.EventBus.createRoute("BEGIN",m,q);n.EventBus.createRoute("SCOPE",D,k.VariableManager.clearVariables);n.EventBus.createRoute("TERMINATE",v);n.EventBus.createRoute("EXIT",v)};d.terminateThreads=w;d.clearThreads=q;d.focusedThread=function(){return null!=
c.thread?f[c.thread]:null};d.updateThreadFocusByName=function(a){g(f[a])};d.focusedThreadVariables=function(){if(null!=c.thread){var a=f[c.thread];if(null!=a)return a.variables}return{}};d.focusedThreadEvaluation=function(){if(null!=c.thread){var a=f[c.thread];if(null!=a)return a.evaluation}return{}};d.showThreads=y})(m.ThreadManager||(m.ThreadManager={}))});
