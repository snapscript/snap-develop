define(["require","exports","jquery"],function(t,n,q){(function(b){function n(a,e){var c;if(e&&0<e.length){var d=e[0].field,l=e[0].direction;c=[];for(var f={},b=0;b<a.length;b++){var k=a[b];if(k){var g=k[d].toLowerCase(),h=f[g];null==h&&(h=[],f[g]=h);h.push(k)}}d=[];for(g in f)f.hasOwnProperty(g)&&d.push(g);d.sort();"asc"!=l&&d.reverse();for(b=0;b<d.length;b++)for(g=d[b],h=f[g],l=0;l<h.length;l++)k=h[l],c.push(k)}else c=a;return c}function r(){return(new Date).getTime()}b.openDialog=function(a,e,
c,d){var b=r();a=window.open(a,e+b,"height\x3d"+d+",width\x3d"+c);void 0!=a&&a.focus&&(a.resizeTo(c,d),a.focus());return!1};b.extractParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(window.location.href);return null==a?"":a[1]};b.decodeValue=function(a){if(0<a.length){var e=("@"+a).substring(2);if("\x3c"==a.charAt(0)){a=e.toString();for(var e="",c=0;c<a.length;c+=2)var d=a.substr(c,2),d=parseInt(d,16),e=e+String.fromCharCode(d)}return e}return null};
b.updateTableRecords=function(a,e){var c=w2ui[e];if(c){var d=q("#grid_"+e+"_records").prop("scrollTop"),b=c.records,f=c.sortData,m=!1;if(a.length==b.length){for(var k=0;k<a.length;k++){var g=b[k],h=a[k];if(!g||g.length!=h.length){m=!0;break}for(var p in g)if(g.hasOwnProperty(p)){if(!h.hasOwnProperty(p)){m=!0;break}if(g[p]!=h[p]){m=!0;break}}}m&&(c.records=n(a,f),c.refresh())}else c.records=n(a,f),c.refresh(),m=!0;a.length>b.length&&(c.reload(),q("#grid_"+e+"_records").prop("scrollTop",d));return m}return!1};
b.getElementsByClassName=function(a,e){function c(a){for(var d=0;d<a.childNodes.length;d++)0<a.childNodes[d].childNodes.length&&c(a.childNodes[d]),a.childNodes[d].getAttribute&&a.childNodes[d].getAttribute("class")&&0<=a.childNodes[d].getAttribute("class").split(" ").indexOf(e)&&b.push(a.childNodes[d])}var b=[];c(a);return b};b.isChildElementVisible=function(a,e){var c=e.getBoundingClientRect(),d=a.getBoundingClientRect(),b=c.top+c.height,f=d.top+a.clientHeight;return c.top>d.top&&b<f};b.calculateScrollOffset=
function(a,e){var c=e.getBoundingClientRect(),b=a.getBoundingClientRect(),l=c.top,f=b.top;if(l<f)return l-f;c=c.top+c.height;b=b.top+a.clientHeight;return c>b?c-b:0};b.stringReplaceText=function(a,b,c){return a&&b&&c?a.split(b).join(c):a};b.stringContains=function(a,b){return a&&b?-1!==a.indexOf(b):!1};b.stringEndsWith=function(a,b){return a&&b&&a.length>=b.length?a.slice(-b.length)==b:!1};b.stringStartsWith=function(a,b){return a&&b&&a.length>=b.length?a.substring(0,b.length)===b:!1};b.isMacintosh=
function(){return-1<navigator.platform.indexOf("Mac")};b.isWindows=function(){return-1<navigator.platform.indexOf("Win")};b.escapeHtml=function(a){return a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#039;")};b.clearHtml=function(a){return a.replace(/<br>/g,"").replace(/&quot;/g,'"').replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;/g,"").replace(/&amp;/g,"\x26")};b.currentTime=r})(n.Common||(n.Common={}))});
