define(["require","exports","jquery"],function(u,n,q){(function(b){function n(a,e){var d;if(e&&0<e.length){var c=e[0].field,k=e[0].direction;d=[];for(var f={},b=0;b<a.length;b++){var l=a[b];if(l){var g=l[c].toLowerCase(),h=f[g];null==h&&(h=[],f[g]=h);h.push(l)}}c=[];for(g in f)f.hasOwnProperty(g)&&c.push(g);c.sort();"asc"!=k&&c.reverse();for(b=0;b<c.length;b++)for(g=c[b],h=f[g],k=0;k<h.length;k++)l=h[k],d.push(l)}else d=a;return d}function r(a,e,d){return a&&e&&d?a.split(e).join(d):a}function t(){return(new Date).getTime()}
b.openDialog=function(a,e,d,c){var b=t();a=window.open(a,e+b,"height\x3d"+c+",width\x3d"+d);void 0!=a&&a.focus&&(a.resizeTo(d,c),a.focus());return!1};b.extractParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(window.location.href);return null==a?"":a[1]};b.decodeValue=function(a){if(0<a.length){var e=("@"+a).substring(2);if("\x3c"==a.charAt(0)){a=e.toString();for(var e="",d=0;d<a.length;d+=2)var c=a.substr(d,2),c=parseInt(c,
16),e=e+String.fromCharCode(c)}return e}return null};b.updateTableRecords=function(a,e){var d=w2ui[e];if(d){var c=q("#grid_"+e+"_records").prop("scrollTop"),b=d.records,f=d.sortData,m=!1;if(a.length==b.length){for(var l=0;l<a.length;l++){var g=b[l],h=a[l];if(!g||g.length!=h.length){m=!0;break}for(var p in g)if(g.hasOwnProperty(p)){if(!h.hasOwnProperty(p)){m=!0;break}if(g[p]!=h[p]){m=!0;break}}}m&&(d.records=n(a,f),d.refresh())}else d.records=n(a,f),d.refresh(),m=!0;a.length>b.length&&(d.reload(),
q("#grid_"+e+"_records").prop("scrollTop",c));return m}return!1};b.getElementsByClassName=function(a,e){function d(a){for(var c=0;c<a.childNodes.length;c++)0<a.childNodes[c].childNodes.length&&d(a.childNodes[c]),a.childNodes[c].getAttribute&&a.childNodes[c].getAttribute("class")&&0<=a.childNodes[c].getAttribute("class").split(" ").indexOf(e)&&b.push(a.childNodes[c])}var b=[];d(a);return b};b.isChildElementVisible=function(a,e){var d=e.getBoundingClientRect(),b=a.getBoundingClientRect(),k=d.top+d.height,
f=b.top+a.clientHeight;return d.top>b.top&&k<f};b.calculateScrollOffset=function(a,e){var b=e.getBoundingClientRect(),c=a.getBoundingClientRect(),k=b.top,f=c.top;if(k<f)return k-f;b=b.top+b.height;c=c.top+a.clientHeight;return b>c?b-c:0};b.formatTimeMillis=function(a){a=(new Date(a)).toISOString();var b=a.indexOf(".");a=a.substring(0,b);return r(a,"T"," ")};b.stringReplaceText=r;b.stringContains=function(a,b){return a&&b?-1!==a.indexOf(b):!1};b.stringEndsWith=function(a,b){return a&&b&&a.length>=
b.length?a.slice(-b.length)==b:!1};b.stringStartsWith=function(a,b){return a&&b&&a.length>=b.length?a.substring(0,b.length)===b:!1};b.isMacintosh=function(){return-1<navigator.platform.indexOf("Mac")};b.isWindows=function(){return-1<navigator.platform.indexOf("Win")};b.escapeHtml=function(a){return a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#039;")};b.clearHtml=function(a){return a.replace(/<br>/g,"").replace(/&quot;/g,'"').replace(/&lt;/g,
"\x3c").replace(/&gt;/g,"\x3e").replace(/&nbsp;/g," ").replace(/&amp;/g,"\x26")};b.currentTime=t})(n.Common||(n.Common={}))});
