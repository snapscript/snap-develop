define("require exports jquery w2ui ./common ./socket ./editor ./profiler ./variables ./console ./threads status commands tree".split(" "),function(H,m,h,t,u,q,z,A,v,B,r,C,D,w){(function(n){function m(){var a=u.Common.currentTime(),c={},b=0,d;for(d in f)if(f.hasOwnProperty(d)){var e=f[d];null!=e&&(e.getTime()+1E4>a?c[d]=e:b++)}f=c;0<b&&l();D.Command.pingProcess()}function x(a,c,b){b=JSON.parse(b);if(a=b.process)c=f[a],b=b.duration,f[a]=null,console.log(a+" is TERMINATED"),b&&c&&console.log("Process took "+
b+" ms");g==a&&(r.ThreadManager.terminateThreads(),y());l()}function E(a,c,b){c=JSON.parse(b);a=c.process;b=c.status;var d=Math.round(c.usedMemory/c.totalMemory*100),e=k[b];b&&k.hasOwnProperty(b)||(e=k.UNKNOWN,console.warn("No such status "+b+" setting to "+k[e]));b=f[a]=new F(a,c.project,c.resource,c.system,e,c.time,c.running,c.debug,c.focus,d,c.threads);b.getDescription();null!=b.getResource()||"REGISTERING"==c.status||b.isFocus();b.isFocus()?(c=f[a],null!=c&&null!=c.getResource()?(w.FileTree.createResourcePath(c.getResource()),
h("#toolbarDebug").css("opacity","1.0"),h("#toolbarDebug").css("filter","alpha(opacity\x3d100)"),C.StatusPanel.showProcessStatus(c.getResource(),a,c.isDebug())):(h("#toolbarDebug").css("opacity","0.4"),h("#toolbarDebug").css("filter","alpha(opacity\x3d40)"),h("#process").html(""),z.FileEditor.clearEditorHighlights()),g!=a&&(A.Profiler.clearProfiler(),r.ThreadManager.clearThreads(),v.VariableManager.clearVariables()),B.ProcessConsole.updateConsoleFocus(a),g=a):g==a&&y();l()}function y(){g=null;r.ThreadManager.clearThreads();
v.VariableManager.clearVariables();h("#toolbarDebug").css("opacity","0.4");h("#toolbarDebug").css("filter","alpha(opacity\x3d40)");h("#process").html("")}function G(){f={};g=null;t.w2ui.debug.records=[];t.w2ui.debug.refresh()}function l(){var a=[],c=1,b;for(b in f)if(f.hasOwnProperty(b)){var d=f[b];if(null!=d){var e=d.getProject();if(e==document.title||null==e){var e="\x3cdiv class\x3d'debugIdleRecord'\x3e"+b+"\x3c/div\x3e",h="\x26nbsp;\x3cinput type\x3d'radio'\x3e\x3clabel\x3e\x3c/label\x3e",p="",
m=d.isDebug(),n=d.getStatus(),l=!1;g==b&&(h="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e\x3clabel\x3e\x3c/label\x3e");null!=d.getResource()&&(p=w.FileTree.createResourcePath(d.getResource()),e=g==b&&m?"\x3cdiv class\x3d'debugFocusRecord'\x3e"+b+"\x3c/div\x3e":"\x3cdiv class\x3d'debugRecord'\x3e"+b+"\x3c/div\x3e",p=p.getResourcePath(),l=!0);a.push({recid:c++,name:e,active:h,process:b,status:k[n],running:l,system:d.getSystem(),resource:d.getResource(),focus:g==b,script:p})}else console.log("Ignoring process "+
b+" as it belongs to "+e)}}u.Common.updateTableRecords(a,"debug")}var k;(function(a){a[a.REGISTERING=0]="REGISTERING";a[a.WAITING=1]="WAITING";a[a.STARTING=2]="STARTING";a[a.COMPILING=3]="COMPILING";a[a.DEBUGGING=4]="DEBUGGING";a[a.RUNNING=5]="RUNNING";a[a.TERMINATING=6]="TERMINATING";a[a.FINISHED=7]="FINISHED";a[a.UNKNOWN=8]="UNKNOWN"})(k||(k={}));var F=function(){function a(a,b,d,e,f,g,h,k,l,m,n){this._process=a;this._resource=d;this._system=e;this._time=g;this._running=h;this._focus=l;this._project=
b;this._memory=m;this._threads=n;this._debug=k;this._status=f}a.prototype.getDescription=function(){return this._resource?this._process+" is "+k[this._status]+" with "+this._resource+" focus is "+this.isFocus():this._process+" is "+k[this._status]};a.prototype.getStatus=function(){return this._status};a.prototype.getProcess=function(){return this._process};a.prototype.getProject=function(){return this._project};a.prototype.getResource=function(){return this._resource};a.prototype.getSystem=function(){return this._system};
a.prototype.getMemory=function(){return this._memory};a.prototype.getThreads=function(){return this._threads};a.prototype.getTime=function(){return this._time};a.prototype.isFocus=function(){return"true"==""+this._focus};a.prototype.isRunning=function(){return"true"==""+this._running};a.prototype.isDebug=function(){return"true"==""+this._debug};return a}(),f={},g=null;n.createStatus=function(){q.EventBus.createRoute("STATUS",E,G);q.EventBus.createRoute("TERMINATE",x,null);q.EventBus.createRoute("EXIT",
x,null);setInterval(m,1E3)};n.isCurrentStatusFocusRunning=function(){if(g){var a=f[g];if(a)return null!=a.getResource()}return!1};n.currentStatusFocus=function(){return g};n.showStatus=l})(m.DebugManager||(m.DebugManager={}))});
