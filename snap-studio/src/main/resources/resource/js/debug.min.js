define("require exports jquery w2ui ./common ./socket ./editor ./profiler ./variables ./console ./threads status commands tree".split(" "),function(D,k,d,p,q,n,w,x,r,y,m,z,A,t){(function(l){function k(){var c=q.Common.currentTime(),a={},b=0,f;for(f in g)if(g.hasOwnProperty(f)){var e=g[f];null!=e&&(e.time+1E4>c?a[f]=e:b++)}g=a;0<b&&h();A.Command.pingProcess()}function u(c,a,b){null!=b&&(g[b]=null);e==b&&(m.ThreadManager.terminateThreads(),v());h()}function B(c,a,b){a=JSON.parse(b);c=a.process;b=""+
a.focus;g[c]={resource:a.resource,system:a.system,time:a.time,running:"true"==""+a.running,focus:b,project:a.project,memory:Math.round(a.usedMemory/a.totalMemory*100),threads:a.threads,debug:"true"==""+a.debug};"true"==b?(a=g[c],null!=a&&null!=a.resource?(t.FileTree.createResourcePath(a.resource),d("#toolbarDebug").css("opacity","1.0"),d("#toolbarDebug").css("filter","alpha(opacity\x3d100)"),console.log(a),z.StatusPanel.showProcessStatus(a.resource,c,a.debug)):(d("#toolbarDebug").css("opacity","0.4"),
d("#toolbarDebug").css("filter","alpha(opacity\x3d40)"),d("#process").html(""),w.FileEditor.clearEditorHighlights()),e!=c&&(x.Profiler.clearProfiler(),m.ThreadManager.clearThreads(),r.VariableManager.clearVariables()),y.ProcessConsole.updateConsoleFocus(c),e=c):e==c&&v();h()}function v(){e=null;m.ThreadManager.clearThreads();r.VariableManager.clearVariables();d("#toolbarDebug").css("opacity","0.4");d("#toolbarDebug").css("filter","alpha(opacity\x3d40)");d("#process").html("")}function C(){g={};e=
null;p.w2ui.debug.records=[];p.w2ui.debug.refresh()}function h(){var c=[],a=1,b;for(b in g)if(g.hasOwnProperty(b)){var f=g[b];if(null!=f){var d=f.project;if(d==document.title||null==d){var d="\x3cdiv class\x3d'debugIdleRecord'\x3e"+b+"\x3c/div\x3e",k="WAITING",l="\x26nbsp;\x3cinput type\x3d'radio'\x3e\x3clabel\x3e\x3c/label\x3e",h="",n=f.debug,m=!1;e==b&&(l="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e\x3clabel\x3e\x3c/label\x3e");null!=f.resource&&(h=t.FileTree.createResourcePath(f.resource),e==
b&&n?(d="\x3cdiv class\x3d'debugFocusRecord'\x3e"+b+"\x3c/div\x3e",k="DEBUGGING"):(d="\x3cdiv class\x3d'debugRecord'\x3e"+b+"\x3c/div\x3e",k="RUNNING"),h=h.resourcePath,m=!0);c.push({recid:a++,name:d,active:l,process:b,status:k,running:m,system:f.system,resource:f.resource,focus:e==b,script:h})}else console.log("Ignoring process "+b+" as it belongs to "+d)}}q.Common.updateTableRecords(c,"debug")}var g={},e=null;l.createStatus=function(){n.EventBus.createRoute("STATUS",B,C);n.EventBus.createRoute("TERMINATE",
u);n.EventBus.createRoute("EXIT",u);setInterval(k,1E3)};l.isCurrentStatusFocusRunning=function(){if(e){var c=g[statusProcess];if(c)return null!=c.resource}return!1};l.currentStatusFocus=function(){return e};l.showStatus=h})(k.DebugManager||(k.DebugManager={}))});
