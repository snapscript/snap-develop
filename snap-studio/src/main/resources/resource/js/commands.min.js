define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(I,q,r,w,u,t,g,p,h,m,n,l,v,E){(function(b){function q(a){return a&&w.Common.stringEndsWith(a,".jar")}function x(a,c){var d=w.Common.stringReplaceText(a,"\\","/"),e=c.substring(0,c.lastIndexOf(".")),f=c.substring(c.lastIndexOf(".")+1);return"/decompile/"+d+"/"+e+"/"+f+".java"}function F(a,c){a&&1<a.length?r.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(d){var e=
[],f;for(f in d)d.hasOwnProperty(f)&&e.push(f);e.sort();f=[];for(var b=0;b<e.length;b++){var k=d[e[b]];f.push({name:k.name,resource:k.resource,module:k.module,extra:k.extra,type:k.type,project:document.title})}c(f,a)},async:!0}):c([],a)}function G(a,c){if(a||""==a){var d=h.FileEditor.getCurrentLineForEditor(),e=h.FileEditor.currentEditorState(),b=JSON.stringify({resource:e.getResource().getProjectPath(),line:d,complete:a.trim(),source:e.getSource()});r.ajax({contentType:"application/json",data:b,
dataType:"json",success:function(d){d=d.outlines;var e=[],b;for(b in d)if(d.hasOwnProperty(b)){var f=d[b];e.push({name:b,type:f.type,resource:f.resource,line:f.line,constraint:f.constraint,declaringClass:f.declaringClass,libraryPath:f.libraryPath})}c(e,a)},error:function(d){c([],a);console.log("Could not complete outline for text '"+a+"'",b)},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else c([],a)}function y(a,c){c||(c="*.snap,*.properties,*.xml,*.txt,*.json");var d=l.DialogBuilder.createTextSearchOnlyDialog;
a&&(d=l.DialogBuilder.createTextSearchAndReplaceDialog);d(function(a,c,d,b){z(a,c,d,function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],k=window.document.location.pathname;k.indexOf(";debug",k.length-6);k="/resource/"+f.project+"/"+f.resource;d.push([{text:f.resource,line:f.line,resource:k,style:"resourceNode"},{text:f.text,line:f.line,resource:k,style:"textNode"}])}return b(d,c)})},c,a?"Replace Text":"Find Text")}function z(a,c,d,e){if(a&&1<a.length){var b;b="/find/"+document.title;b+="?expression\x3d"+
encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(c);b+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(d.replace);b+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);r.ajax({url:b,success:function(c){for(var d=[],b=0;b<c.length;b++)d.push(c[b]);e(d,a)},async:!0})}else e([],a)}function H(a,c){a&&1<a.length?
r.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(d){for(var b=[],f=0;f<d.length;f++)b.push(d[f]);c(b,a)},async:!0}):c([],a)}function A(a,c){var d=h.FileEditor.currentEditorState();null==d.getResource()?l.DialogBuilder.openTreeDialog(null,!1,function(d){d=B(a);c(d)}):h.FileEditor.isEditorChanged()?l.DialogBuilder.openTreeDialog(d.getResource(),!0,function(d){d=B(a);c(d)}):(p.ProcessConsole.clearConsole(),c(function(){}))}function B(a){var c=h.FileEditor.currentEditorState(),
d=c.getResource();if(null!=d){var b={project:document.title,resource:d.getFilePath(),source:c.getSource(),directory:!1,create:!1};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",b);if(a)return function(){var a=(new Date).getTime(),a=new v.FileResource(d,null,a,c.getSource(),null,!1,!1);h.FileEditor.updateEditor(a)}}return function(){}}function C(a){A(!0,function(c){setTimeout(function(){var d=function(){setTimeout(function(){h.FileEditor.focusEditor();c()},1)};a?t.Alerts.createDebugPromptAlert("Debug",
"Enter arguments","Debug","Cancel",function(a){D(!0,a);d()},function(a){d()}):t.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){D(!1,a);d()},function(a){d()})},1)})}function D(a,c){var d=h.FileEditor.currentEditorState(),b=c.split(/[ ]+/),d={breakpoints:d.getBreakpoints(),arguments:b,project:document.title,resource:d.getResource().getFilePath(),source:d.getSource(),debug:a?!0:!1};g.EventBus.sendEvent("EXECUTE",d)}b.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,
c,d){F(a,function(a,c){for(var b=[],k=0;k<a.length;k++){var f=window.document.location.pathname,f=-1!==f.indexOf(";debug",f.length-6),e="/project/"+a[k].project,g="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].module+"\x3ci\x3e",h="";a[k].extra&&(h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].extra+"\x3ci\x3e");f&&(e+=";debug");e=q(a[k].extra)?e+("#"+x(a[k].extra,a[k].module+"."+a[k].name)):e+("#"+a[k].resource);b.push([{text:a[k].name+"\x26nbsp;\x26nbsp;"+g,link:e,style:"module"==a[k].type?"moduleNode":"typeNode"},
{text:a[k].resource+"\x26nbsp;\x26nbsp;"+h,link:e,style:"resourceNode"}])}d(b,c)})},null,"Search Types")};b.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,c,d){G(a,function(a,c){for(var b=[],k=0;k<a.length;k++){var e=a[k],f=e.type.toLowerCase(),g="\x3ci style\x3d'opacity: 0.5'\x3e"+e.constraint+"\x3ci\x3e",h;h=e.declaringClass;h=h.substring(h.lastIndexOf(".")+1);var l=e.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",m=e.resource,
n=e.line,p=null;q(e.libraryPath)&&e.declaringClass?(p="/project/"+document.title+"#"+x(e.libraryPath,e.declaringClass),n=null):m="/resource/"+document.title+m;b.push([{text:e.name+"\x26nbsp;\x26nbsp;"+g,resource:m,link:p,line:n,style:"function"==f?"functionNode":"propertyNode"},{text:h+"\x26nbsp;\x26nbsp;"+l,resource:m,link:p,line:n,style:"resourceNode"}])}d(b,c)})},null,"Search Outline")};b.replaceTokenInFiles=function(a,c,d){z(a,d,c,function(a){for(var d=h.FileEditor.currentEditorState(),c=0;c<
a.length;c++){var b=a[c],b=m.FileTree.createResourcePath("/resource/"+b.project+"/"+b.resource);d.getResource().getResourcePath()==b.getResourcePath()&&v.FileExplorer.openTreeFile(b.getResourcePath(),function(){})}})};b.searchFiles=function(a){y(!1,a)};b.searchAndReplaceFiles=function(a){y(!0,a)};b.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,c,d){H(a,function(a,c){for(var b=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-
6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;b.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return d(b,c)})},null,"Find Files")};b.openTerminal=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),terminal:!0},g.EventBus.sendEvent("EXPLORE",a))};b.exploreDirectory=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),terminal:!1},g.EventBus.sendEvent("EXPLORE",
a))};b.folderExpand=function(a){g.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};b.folderCollapse=function(a){g.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};b.pingProcess=function(){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("PING",document.title)};b.uploadFileTo=function(a,c,d){c=m.FileTree.createResourcePath(c);c=m.FileTree.cleanResourcePath(c.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+c);g.EventBus.sendEvent("UPLOAD",
{project:document.title,name:a,to:c,data:d,dragAndDrop:!0})};b.isDragAndDropFilePossible=function(a,c){return!0};b.dragAndDropFile=function(a,c){var d=m.FileTree.createResourcePath(a.resource),b=m.FileTree.createResourcePath(c.resource),f=m.FileTree.cleanResourcePath(d.getFilePath()),d=m.FileTree.cleanResourcePath(b.getFilePath()+"/"+d.getFileName());console.log("source: "+f+" destination: "+d);g.EventBus.sendEvent("RENAME",{project:document.title,from:f,to:d,dragAndDrop:!0});u.Project.renameEditorTab(f,
d)};b.renameFile=function(a){var c=a.getFilePath();l.DialogBuilder.renameFileTreeDialog(a,!0,function(d){var b={project:document.title,from:c,to:d.getFilePath(),dragAndDrop:!1};g.EventBus.sendEvent("RENAME",b);u.Project.renameEditorTab(a.getResourcePath(),d.getResourcePath())})};b.renameDirectory=function(a){var c=a.getFilePath();a=m.FileTree.createResourcePath(c+".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:document.title,from:c,to:a.getFilePath()};g.EventBus.sendEvent("RENAME",
a)})};b.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!m.FileTree.isResourceFolder(a.getFilePath())){var c={project:document.title,resource:a.getFilePath(),source:"",directory:!1,create:!0};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",c);c=(new Date).getTime();a=new v.FileResource(a,null,c,"",null,!1,!1);h.FileEditor.updateEditor(a)}})};b.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){m.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:document.title,resource:a.getFilePath(),source:"",directory:!0,create:!0},p.ProcessConsole.clearConsole(),g.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){A(!0,function(a){a()})};b.saveEditorOnClose=function(a,c){null!=c&&c.getResourcePath()&&l.DialogBuilder.openTreeDialog(c,!0,function(b){b={project:document.title,resource:c.getFilePath(),source:a,directory:!1,create:!1};g.EventBus.sendEvent("SAVE",b);h.FileEditor.clearSavedEditorBuffer(c.getResourcePath())},function(a){h.FileEditor.clearSavedEditorBuffer(c.getResourcePath())})};
b.deleteFile=function(a){var c=h.FileEditor.currentEditorState();null==a&&null!=c.getResource()&&(a=c.getResource());null!=a&&(c="Delete resource "+c.getResource().getFilePath(),t.Alerts.createConfirmAlert("Delete File",c,"Delete","Cancel",function(){var c={project:document.title,resource:a.getFilePath()};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("DELETE",c);u.Project.deleteEditorTab(a.getResourcePath())},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:document.title,
resource:a.getFilePath()},p.ProcessConsole.clearConsole(),g.EventBus.sendEvent("DELETE",a))};b.createArchive=function(a,c){l.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:document.title,resource:c.getProjectPath(),archive:a.getProjectPath()};g.EventBus.sendEvent("CREATE_ARCHIVE",a)})};b.runScript=function(){C(!1)};b.debugScript=function(){C(!0)};b.attachRemoteDebugger=function(){g.EventBus.isSocketOpen()&&t.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e",
"Attach","Cancel",function(a){g.EventBus.sendEvent("REMOTE_DEBUG",{project:document.title,address:a})})};b.updateScriptBreakpoints=function(){var a={breakpoints:h.FileEditor.currentEditorState().getBreakpoints(),project:document.title};g.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=n.ThreadManager.focusedThread();
null!=a&&(a={thread:a.getThread(),type:"STEP_IN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.stopScript=function(){g.EventBus.sendEvent("STOP")};
b.browseScriptVariables=function(a){var c=n.ThreadManager.focusedThread();null!=c&&(a={thread:c.getThread(),expand:a},g.EventBus.sendEvent("BROWSE",a))};b.browseScriptEvaluation=function(a,c,b){var d=n.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:c,expand:a,refresh:b},g.EventBus.sendEvent("EVALUATE",a))};b.attachProcess=function(a){var c=E.DebugManager.currentStatusFocus(),b=h.FileEditor.currentEditorState();a={process:a,breakpoints:b.getBreakpoints(),project:document.title,
focus:c!=a};g.EventBus.sendEvent("ATTACH",a)};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=n.ThreadManager.focusedThread()){var a=h.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};
b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(q.Command||(q.Command={}))});
