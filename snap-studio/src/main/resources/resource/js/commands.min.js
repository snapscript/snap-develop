define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(H,r,q,v,t,B,g,n,h,l,m,k,C,D){(function(c){function r(a){return a&&v.Common.stringEndsWith(a,".jar")}function w(a,b){var d=v.Common.stringReplaceText(a,"\\","/"),f=b.substring(0,b.lastIndexOf(".")),e=b.substring(b.lastIndexOf(".")+1);return"/decompile/"+d+"/"+f+"/"+e+".java"}function E(a,b){a&&1<a.length?q.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(d){var f=
[],e;for(e in d)d.hasOwnProperty(e)&&f.push(e);f.sort();for(var c=[],p=0;p<f.length;p++)e=f[p],e=d[e],c.push({name:e.name,resource:e.resource,module:e.module,extra:e.extra,type:e.type,project:document.title});b(c,a)},async:!0}):b([],a)}function F(a,b){if(a||""==a){var d=h.FileEditor.getCurrentLineForEditor(),f=h.FileEditor.loadEditor(),d=JSON.stringify({resource:f.resource.projectPath,line:d,complete:a.trim(),source:f.source});q.ajax({contentType:"application/json",data:d,dataType:"json",success:function(d){d=
d.outlines;var f=[],c;for(c in d)if(d.hasOwnProperty(c)){var e=d[c];f.push({name:c,type:e.type,resource:e.resource,line:e.line,constraint:e.constraint,declaringClass:e.declaringClass,libraryPath:e.libraryPath})}b(f,a)},error:function(){b([],a);console.log("Could not complete outline")},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else b([],a)}function x(a,b){b||(b="*.snap,*.properties,*.xml,*.txt,*.json");var d=k.DialogBuilder.createTextSearchOnlyDialog;a&&(d=k.DialogBuilder.createTextSearchAndReplaceDialog);
d(function(a,b,d,c){y(a,b,d,function(a,b){for(var d=[],f=0;f<a.length;f++){var e=a[f],p=window.document.location.pathname;p.indexOf(";debug",p.length-6);p="/resource/"+e.project+"/"+e.resource;d.push([{text:e.resource,line:e.line,resource:p,style:"resourceNode"},{text:e.text,line:e.line,resource:p,style:"textNode"}])}return c(d,b)})},b,a?"Replace Text":"Find Text")}function y(a,b,d,f){if(a&&1<a.length){var e;e="/find/"+document.title;e+="?expression\x3d"+encodeURIComponent(a);e+="\x26pattern\x3d"+
encodeURIComponent(b);e+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);e+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);e+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);e+="\x26replace\x3d"+encodeURIComponent(d.replace);e+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);q.ajax({url:e,success:function(b){for(var d=[],e=0;e<b.length;e++)d.push(b[e]);f(d,a)},async:!0})}else f([],a)}function G(a,b){a&&1<a.length?q.ajax({url:"/file/"+document.title+
"?expression\x3d"+a,success:function(d){for(var f=[],e=0;e<d.length;e++)f.push(d[e]);b(f,a)},async:!0}):b([],a)}function z(a,b){var d=h.FileEditor.loadEditor();null==d.resource?k.DialogBuilder.openTreeDialog(null,!1,function(d){u(b);a()}):h.FileEditor.isEditorChanged()?k.DialogBuilder.openTreeDialog(d.resource,!0,function(d){u(b);a()}):(n.ProcessConsole.clearConsole(),a())}function u(a){var b=h.FileEditor.loadEditor(),d=b.resource;if(null!=d){var f={project:document.title,resource:d.filePath,source:b.source,
directory:!1,create:!1};n.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",f);a&&h.FileEditor.updateEditor(b.source,d.projectPath)}}function A(a){z(function(){var b=h.FileEditor.loadEditor();g.EventBus.sendEvent("EXECUTE",{breakpoints:b.breakpoints,project:document.title,resource:b.resource.filePath,source:b.source,debug:a?!0:!1})},!0)}c.searchTypes=function(){k.DialogBuilder.createListDialog(function(a,b,d){E(a,function(a,b){for(var e=[],c=0;c<a.length;c++){var f=window.document.location.pathname,
f=-1!==f.indexOf(";debug",f.length-6),g="/project/"+a[c].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[c].module+"\x3ci\x3e",k="";a[c].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[c].extra+"\x3ci\x3e");f&&(g+=";debug");g=r(a[c].extra)?g+("#"+w(a[c].extra,a[c].module+"."+a[c].name)):g+("#"+a[c].resource);e.push([{text:a[c].name+"\x26nbsp;\x26nbsp;"+h,link:g,style:"module"==a[c].type?"moduleNode":"typeNode"},{text:a[c].resource+"\x26nbsp;\x26nbsp;"+k,link:g,style:"resourceNode"}])}d(e,b)})},null,
"Search Types")};c.searchOutline=function(){k.DialogBuilder.createListDialog(function(a,b,d){F(a,function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e],g=f.type.toLowerCase(),h="\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e",k;k=f.declaringClass;k=k.substring(k.lastIndexOf(".")+1);var l=f.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",m=f.resource,n=f.line,q=null;r(f.libraryPath)&&f.declaringClass?(q="/project/"+document.title+"#"+
w(f.libraryPath,f.declaringClass),n=null):m="/resource/"+document.title+m;c.push([{text:f.name+"\x26nbsp;\x26nbsp;"+h,resource:m,link:q,line:n,style:"function"==g?"functionNode":"propertyNode"},{text:k+"\x26nbsp;\x26nbsp;"+l,resource:m,link:q,line:n,style:"resourceNode"}])}d(c,b)})},null,"Search Outline")};c.replaceTokenInFiles=function(a,b,d){y(a,d,b,function(a){for(var b=h.FileEditor.loadEditor(),d=0;d<a.length;d++){var c=a[d],c=l.FileTree.createResourcePath("/resource/"+c.project+"/"+c.resource);
b.resource.resourcePath==c.resourcePath&&C.FileExplorer.openTreeFile(c.resourcePath,function(){})}})};c.searchFiles=function(a){x(!1,a)};c.searchAndReplaceFiles=function(a){x(!0,a)};c.findFileNames=function(){k.DialogBuilder.createListDialog(function(a,b,d){G(a,function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;c.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return d(c,
b)})},null,"Find Files")};c.openTerminal=function(a){l.FileTree.isResourceFolder(a.filePath)&&g.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!0})};c.exploreDirectory=function(a){l.FileTree.isResourceFolder(a.filePath)&&g.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!1})};c.folderExpand=function(a){g.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};c.folderCollapse=function(a){g.EventBus.sendEvent("FOLDER_COLLAPSE",
{project:document.title,folder:a})};c.pingProcess=function(){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("PING",document.title)};c.uploadFileTo=function(a,b,d){b=l.FileTree.createResourcePath(b);b=l.FileTree.cleanResourcePath(b.filePath+"/"+a);console.log("source: "+a+" destination: "+b);g.EventBus.sendEvent("UPLOAD",{project:document.title,name:a,to:b,data:d,dragAndDrop:!0})};c.isDragAndDropFilePossible=function(a,b){return!0};c.dragAndDropFile=function(a,b){var d=l.FileTree.createResourcePath(a.resource),
c=l.FileTree.createResourcePath(b.resource),e=l.FileTree.cleanResourcePath(d.filePath),d=l.FileTree.cleanResourcePath(c.filePath+"/"+d.fileName);console.log("source: "+e+" destination: "+d);g.EventBus.sendEvent("RENAME",{project:document.title,from:e,to:d,dragAndDrop:!0});t.Project.renameEditorTab(e,d)};c.renameFile=function(a){var b=a.filePath;k.DialogBuilder.renameFileTreeDialog(a,!0,function(d){g.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:d.filePath,dragAndDrop:!1});t.Project.renameEditorTab(a.resourcePath,
d.resourcePath)})};c.renameDirectory=function(a){var b=a.filePath;a=l.FileTree.createResourcePath(b+".#");k.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){g.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:a.filePath})})};c.newFile=function(a){k.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!l.FileTree.isResourceFolder(a.filePath)){var b={project:document.title,resource:a.filePath,source:"",directory:!1,create:!0};n.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",
b);h.FileEditor.updateEditor("",a.projectPath)}})};c.newDirectory=function(a){k.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){l.FileTree.isResourceFolder(a.filePath)&&(a={project:document.title,resource:a.filePath,source:"",directory:!0,create:!0},n.ProcessConsole.clearConsole(),g.EventBus.sendEvent("SAVE",a))})};c.saveFile=function(){z(function(){},!0)};c.saveEditor=u;c.saveEditorOnClose=function(a,b){k.DialogBuilder.openTreeDialog(b,!0,function(c){g.EventBus.sendEvent("SAVE",{project:document.title,
resource:b.filePath,source:a,directory:!1,create:!1});h.FileEditor.clearSavedEditorBuffer(b.resourcePath)},function(a){h.FileEditor.clearSavedEditorBuffer(b.resourcePath)})};c.deleteFile=function(a){var b=h.FileEditor.loadEditor();null==a&&null!=b.resource&&(a=b.resource);null!=a&&(b=h.FileEditor.loadEditor(),B.Alerts.createConfirmAlert("Delete File","Delete resource "+b.resource.filePath,"Delete","Cancel",function(){var c={project:document.title,resource:a.filePath};n.ProcessConsole.clearConsole();
g.EventBus.sendEvent("DELETE",c);null!=b.resource&&b.resource.resourcePath==a.resourcePath&&h.FileEditor.resetEditor();t.Project.deleteEditorTab(a.resourcePath)},function(){}))};c.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.filePath},n.ProcessConsole.clearConsole(),g.EventBus.sendEvent("DELETE",a))};c.runScript=function(){A(!1)};c.debugScript=function(){A(!0)};c.updateScriptBreakpoints=function(){var a={breakpoints:h.FileEditor.loadEditor().breakpoints,project:document.title};
g.EventBus.sendEvent("BREAKPOINTS",a)};c.stepOverScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OVER"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};c.stepInScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};c.stepOutScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},
h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};c.resumeScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"RUN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};c.stopScript=function(){g.EventBus.sendEvent("STOP")};c.browseScriptVariables=function(a){var b=m.ThreadManager.focusedThread();null!=b&&g.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};c.browseScriptEvaluation=function(a,b,c){var d=m.ThreadManager.focusedThread();
null!=d&&g.EventBus.sendEvent("EVALUATE",{thread:d.thread,expression:b,expand:a,refresh:c})};c.attachProcess=function(a){var b=D.DebugManager.currentStatusFocus(),c=h.FileEditor.loadEditor();g.EventBus.sendEvent("ATTACH",{process:a,breakpoints:c.breakpoints,project:document.title,focus:b!=a})};c.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+
";debug"+b};c.updateDisplay=function(a){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("DISPLAY_UPDATE",a)};c.evaluateExpression=function(){if(null!=m.ThreadManager.focusedThread()){var a=h.FileEditor.getSelectedText();k.DialogBuilder.evaluateExpressionDialog(a)}};c.refreshScreen=function(){setTimeout(function(){location.reload()},10)};c.switchProject=function(){document.location="/"}})(r.Command||(r.Command={}))});
