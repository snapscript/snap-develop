define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(H,q,p,w,t,C,e,n,g,k,l,h,u,D){(function(c){function q(a){return a&&w.Common.stringEndsWith(a,".jar")}function x(a,b){var d=w.Common.stringReplaceText(a,"\\","/"),f=b.substring(0,b.lastIndexOf(".")),c=b.substring(b.lastIndexOf(".")+1);return"/decompile/"+d+"/"+f+"/"+c+".java"}function E(a,b){a&&1<a.length?p.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(d){var f=
[],c;for(c in d)d.hasOwnProperty(c)&&f.push(c);f.sort();c=[];for(var e=0;e<f.length;e++){var m=d[f[e]];c.push({name:m.name,resource:m.resource,module:m.module,extra:m.extra,type:m.type,project:document.title})}b(c,a)},async:!0}):b([],a)}function F(a,b){if(a||""==a){var d=g.FileEditor.getCurrentLineForEditor(),f=g.FileEditor.currentEditorState(),c=JSON.stringify({resource:f.getResource().getProjectPath(),line:d,complete:a.trim(),source:f.getSource()});p.ajax({contentType:"application/json",data:c,
dataType:"json",success:function(d){d=d.outlines;var f=[],c;for(c in d)if(d.hasOwnProperty(c)){var e=d[c];f.push({name:c,type:e.type,resource:e.resource,line:e.line,constraint:e.constraint,declaringClass:e.declaringClass,libraryPath:e.libraryPath})}b(f,a)},error:function(d){b([],a);console.log("Could not complete outline for text '"+a+"'",c)},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else b([],a)}function y(a,b){b||(b="*.snap,*.properties,*.xml,*.txt,*.json");var d=h.DialogBuilder.createTextSearchOnlyDialog;
a&&(d=h.DialogBuilder.createTextSearchAndReplaceDialog);d(function(a,b,d,c){z(a,b,d,function(a,b){for(var d=[],f=0;f<a.length;f++){var e=a[f],m=window.document.location.pathname;m.indexOf(";debug",m.length-6);m="/resource/"+e.project+"/"+e.resource;d.push([{text:e.resource,line:e.line,resource:m,style:"resourceNode"},{text:e.text,line:e.line,resource:m,style:"textNode"}])}return c(d,b)})},b,a?"Replace Text":"Find Text")}function z(a,b,d,c){if(a&&1<a.length){var f;f="/find/"+document.title;f+="?expression\x3d"+
encodeURIComponent(a);f+="\x26pattern\x3d"+encodeURIComponent(b);f+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);f+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);f+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);f+="\x26replace\x3d"+encodeURIComponent(d.replace);f+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);p.ajax({url:f,success:function(b){for(var d=[],f=0;f<b.length;f++)d.push(b[f]);c(d,a)},async:!0})}else c([],a)}function G(a,b){a&&1<a.length?
p.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(d){for(var f=[],c=0;c<d.length;c++)f.push(d[c]);b(f,a)},async:!0}):b([],a)}function A(a,b){var d=g.FileEditor.currentEditorState();null==d.getResource()?h.DialogBuilder.openTreeDialog(null,!1,function(d){v(b);a()}):g.FileEditor.isEditorChanged()?h.DialogBuilder.openTreeDialog(d.getResource(),!0,function(d){v(b);a()}):(n.ProcessConsole.clearConsole(),a())}function v(a){var b=g.FileEditor.currentEditorState(),d=b.getResource();
if(null!=d){var f={project:document.title,resource:d.getFilePath(),source:b.getSource(),directory:!1,create:!1};n.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",f);a&&(a=(new Date).getTime(),b=new u.FileResource(d.getProjectPath(),null,a,b.getSource(),null),g.FileEditor.updateEditor(b))}}function B(a){A(function(){var b=g.FileEditor.currentEditorState(),b={breakpoints:b.getBreakpoints(),project:document.title,resource:b.getResource().getFilePath(),source:b.getSource(),debug:a?!0:!1};e.EventBus.sendEvent("EXECUTE",
b)},!0)}c.searchTypes=function(){h.DialogBuilder.createListDialog(function(a,b,d){E(a,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=window.document.location.pathname,e=-1!==e.indexOf(";debug",e.length-6),g="/project/"+a[f].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].module+"\x3ci\x3e",k="";a[f].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].extra+"\x3ci\x3e");e&&(g+=";debug");g=q(a[f].extra)?g+("#"+x(a[f].extra,a[f].module+"."+a[f].name)):g+("#"+a[f].resource);c.push([{text:a[f].name+
"\x26nbsp;\x26nbsp;"+h,link:g,style:"module"==a[f].type?"moduleNode":"typeNode"},{text:a[f].resource+"\x26nbsp;\x26nbsp;"+k,link:g,style:"resourceNode"}])}d(c,b)})},null,"Search Types")};c.searchOutline=function(){h.DialogBuilder.createListDialog(function(a,b,d){F(a,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=a[f],g=e.type.toLowerCase(),k="\x3ci style\x3d'opacity: 0.5'\x3e"+e.constraint+"\x3ci\x3e",h;h=e.declaringClass;h=h.substring(h.lastIndexOf(".")+1);var l=e.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+
l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",r=e.resource,n=e.line,p=null;q(e.libraryPath)&&e.declaringClass?(p="/project/"+document.title+"#"+x(e.libraryPath,e.declaringClass),n=null):r="/resource/"+document.title+r;c.push([{text:e.name+"\x26nbsp;\x26nbsp;"+k,resource:r,link:p,line:n,style:"function"==g?"functionNode":"propertyNode"},{text:h+"\x26nbsp;\x26nbsp;"+l,resource:r,link:p,line:n,style:"resourceNode"}])}d(c,b)})},null,"Search Outline")};c.replaceTokenInFiles=function(a,b,d){z(a,d,b,function(a){for(var b=
g.FileEditor.currentEditorState(),d=0;d<a.length;d++){var c=a[d],c=k.FileTree.createResourcePath("/resource/"+c.project+"/"+c.resource);b.getResource().getResourcePath()==c.getResourcePath()&&u.FileExplorer.openTreeFile(c.getResourcePath(),function(){})}})};c.searchFiles=function(a){y(!1,a)};c.searchAndReplaceFiles=function(a){y(!0,a)};c.findFileNames=function(){h.DialogBuilder.createListDialog(function(a,b,d){G(a,function(a,b){for(var c=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,
g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;c.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return d(c,b)})},null,"Find Files")};c.openTerminal=function(a){k.FileTree.isResourceFolder(a.filePath)&&e.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!0})};c.exploreDirectory=function(a){k.FileTree.isResourceFolder(a.filePath)&&e.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,
terminal:!1})};c.folderExpand=function(a){e.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};c.folderCollapse=function(a){e.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};c.pingProcess=function(){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("PING",document.title)};c.uploadFileTo=function(a,b,d){b=k.FileTree.createResourcePath(b);b=k.FileTree.cleanResourcePath(b.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+b);e.EventBus.sendEvent("UPLOAD",
{project:document.title,name:a,to:b,data:d,dragAndDrop:!0})};c.isDragAndDropFilePossible=function(a,b){return!0};c.dragAndDropFile=function(a,b){var d=k.FileTree.createResourcePath(a.resource),c=k.FileTree.createResourcePath(b.resource),g=k.FileTree.cleanResourcePath(d.getFilePath()),d=k.FileTree.cleanResourcePath(c.getFilePath()+"/"+d.getFileName());console.log("source: "+g+" destination: "+d);e.EventBus.sendEvent("RENAME",{project:document.title,from:g,to:d,dragAndDrop:!0});t.Project.renameEditorTab(g,
d)};c.renameFile=function(a){var b=a.getFilePath();h.DialogBuilder.renameFileTreeDialog(a,!0,function(d){var c={project:document.title,from:b,to:d.getFilePath(),dragAndDrop:!1};e.EventBus.sendEvent("RENAME",c);t.Project.renameEditorTab(a.getResourcePath(),d.getResourcePath())})};c.renameDirectory=function(a){var b=a.getFilePath();a=k.FileTree.createResourcePath(b+".#");h.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:document.title,from:b,to:a.getFilePath()};e.EventBus.sendEvent("RENAME",
a)})};c.newFile=function(a){h.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!k.FileTree.isResourceFolder(a.getFilePath())){var b={project:document.title,resource:a.getFilePath(),source:"",directory:!1,create:!0};n.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new u.FileResource(a.getProjectPath(),null,b,"",null);g.FileEditor.updateEditor(a)}})};c.newDirectory=function(a){h.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){k.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:document.title,resource:a.getFilePath(),source:"",directory:!0,create:!0},n.ProcessConsole.clearConsole(),e.EventBus.sendEvent("SAVE",a))})};c.saveFile=function(){A(function(){},!0)};c.saveEditor=v;c.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&h.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:document.title,resource:b.getFilePath(),source:a,directory:!1,create:!1};e.EventBus.sendEvent("SAVE",c);g.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){g.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};
c.deleteFile=function(a){var b=g.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=b.getResource());if(null!=a){var c="Delete resource "+b.getResource().getFilePath();C.Alerts.createConfirmAlert("Delete File",c,"Delete","Cancel",function(){var c={project:document.title,resource:a.getFilePath()};n.ProcessConsole.clearConsole();e.EventBus.sendEvent("DELETE",c);null!=b.getResource()&&b.getResource().getResourcePath()==a.getResourcePath()&&g.FileEditor.resetEditor();t.Project.deleteEditorTab(a.getResourcePath())},
function(){})}};c.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.getFilePath()},n.ProcessConsole.clearConsole(),e.EventBus.sendEvent("DELETE",a))};c.runScript=function(){B(!1)};c.debugScript=function(){B(!0)};c.updateScriptBreakpoints=function(){var a={breakpoints:g.FileEditor.currentEditorState().getBreakpoints(),project:document.title};e.EventBus.sendEvent("BREAKPOINTS",a)};c.stepOverScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,
type:"STEP_OVER"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};c.stepInScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};c.stepOutScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};c.resumeScript=function(){var a=l.ThreadManager.focusedThread();
null!=a&&(a={thread:a.thread,type:"RUN"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};c.stopScript=function(){e.EventBus.sendEvent("STOP")};c.browseScriptVariables=function(a){var b=l.ThreadManager.focusedThread();null!=b&&e.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};c.browseScriptEvaluation=function(a,b,c){var d=l.ThreadManager.focusedThread();null!=d&&e.EventBus.sendEvent("EVALUATE",{thread:d.thread,expression:b,expand:a,refresh:c})};c.attachProcess=function(a){var b=
D.DebugManager.currentStatusFocus(),c=g.FileEditor.currentEditorState();a={process:a,breakpoints:c.getBreakpoints(),project:document.title,focus:b!=a};e.EventBus.sendEvent("ATTACH",a)};c.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};c.updateDisplay=function(a){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("DISPLAY_UPDATE",a)};c.evaluateExpression=
function(){if(null!=l.ThreadManager.focusedThread()){var a=g.FileEditor.getSelectedText();h.DialogBuilder.evaluateExpressionDialog(a)}};c.refreshScreen=function(){setTimeout(function(){location.reload()},10)};c.switchProject=function(){document.location="/"}})(q.Command||(q.Command={}))});
