define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(H,q,p,w,t,C,d,n,g,k,l,h,u,D){(function(b){function q(a){return a&&w.Common.stringEndsWith(a,".jar")}function x(a,c){var e=w.Common.stringReplaceText(a,"\\","/"),f=c.substring(0,c.lastIndexOf(".")),b=c.substring(c.lastIndexOf(".")+1);return"/decompile/"+e+"/"+f+"/"+b+".java"}function E(a,c){a&&1<a.length?p.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(e){var f=
[],b;for(b in e)e.hasOwnProperty(b)&&f.push(b);f.sort();b=[];for(var d=0;d<f.length;d++){var m=e[f[d]];b.push({name:m.name,resource:m.resource,module:m.module,extra:m.extra,type:m.type,project:document.title})}c(b,a)},async:!0}):c([],a)}function F(a,c){if(a||""==a){var e=g.FileEditor.getCurrentLineForEditor(),f=g.FileEditor.currentEditorState(),b=JSON.stringify({resource:f.getResource().getProjectPath(),line:e,complete:a.trim(),source:f.getSource()});p.ajax({contentType:"application/json",data:b,
dataType:"json",success:function(e){e=e.outlines;var f=[],b;for(b in e)if(e.hasOwnProperty(b)){var d=e[b];f.push({name:b,type:d.type,resource:d.resource,line:d.line,constraint:d.constraint,declaringClass:d.declaringClass,libraryPath:d.libraryPath})}c(f,a)},error:function(e){c([],a);console.log("Could not complete outline for text '"+a+"'",b)},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else c([],a)}function y(a,c){c||(c="*.snap,*.properties,*.xml,*.txt,*.json");var e=h.DialogBuilder.createTextSearchOnlyDialog;
a&&(e=h.DialogBuilder.createTextSearchAndReplaceDialog);e(function(a,c,e,b){z(a,c,e,function(a,c){for(var e=[],f=0;f<a.length;f++){var d=a[f],m=window.document.location.pathname;m.indexOf(";debug",m.length-6);m="/resource/"+d.project+"/"+d.resource;e.push([{text:d.resource,line:d.line,resource:m,style:"resourceNode"},{text:d.text,line:d.line,resource:m,style:"textNode"}])}return b(e,c)})},c,a?"Replace Text":"Find Text")}function z(a,c,e,f){if(a&&1<a.length){var b;b="/find/"+document.title;b+="?expression\x3d"+
encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(c);b+="\x26caseSensitive\x3d"+encodeURIComponent(e.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(e.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(e.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(e.replace);b+="\x26enableReplace\x3d"+encodeURIComponent(e.enableReplace);p.ajax({url:b,success:function(c){for(var e=[],b=0;b<c.length;b++)e.push(c[b]);f(e,a)},async:!0})}else f([],a)}function G(a,c){a&&1<a.length?
p.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(e){for(var b=[],d=0;d<e.length;d++)b.push(e[d]);c(b,a)},async:!0}):c([],a)}function A(a,c){var e=g.FileEditor.currentEditorState();null==e.getResource()?h.DialogBuilder.openTreeDialog(null,!1,function(e){v(c);a()}):g.FileEditor.isEditorChanged()?h.DialogBuilder.openTreeDialog(e.getResource(),!0,function(e){v(c);a()}):(n.ProcessConsole.clearConsole(),a())}function v(a){var c=g.FileEditor.currentEditorState(),e=c.getResource();
if(null!=e){var b={project:document.title,resource:e.getFilePath(),source:c.getSource(),directory:!1,create:!1};n.ProcessConsole.clearConsole();d.EventBus.sendEvent("SAVE",b);a&&(a=(new Date).getTime(),c=new u.FileResource(e,null,a,c.getSource(),null,!1,!1),g.FileEditor.updateEditor(c))}}function B(a){A(function(){var c=g.FileEditor.currentEditorState(),c={breakpoints:c.getBreakpoints(),project:document.title,resource:c.getResource().getFilePath(),source:c.getSource(),debug:a?!0:!1};d.EventBus.sendEvent("EXECUTE",
c)},!0)}b.searchTypes=function(){h.DialogBuilder.createListDialog(function(a,c,e){E(a,function(a,c){for(var b=[],d=0;d<a.length;d++){var f=window.document.location.pathname,f=-1!==f.indexOf(";debug",f.length-6),g="/project/"+a[d].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[d].module+"\x3ci\x3e",k="";a[d].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[d].extra+"\x3ci\x3e");f&&(g+=";debug");g=q(a[d].extra)?g+("#"+x(a[d].extra,a[d].module+"."+a[d].name)):g+("#"+a[d].resource);b.push([{text:a[d].name+
"\x26nbsp;\x26nbsp;"+h,link:g,style:"module"==a[d].type?"moduleNode":"typeNode"},{text:a[d].resource+"\x26nbsp;\x26nbsp;"+k,link:g,style:"resourceNode"}])}e(b,c)})},null,"Search Types")};b.searchOutline=function(){h.DialogBuilder.createListDialog(function(a,c,b){F(a,function(a,c){for(var e=[],d=0;d<a.length;d++){var f=a[d],g=f.type.toLowerCase(),k="\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e",h;h=f.declaringClass;h=h.substring(h.lastIndexOf(".")+1);var l=f.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+
l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",r=f.resource,n=f.line,p=null;q(f.libraryPath)&&f.declaringClass?(p="/project/"+document.title+"#"+x(f.libraryPath,f.declaringClass),n=null):r="/resource/"+document.title+r;e.push([{text:f.name+"\x26nbsp;\x26nbsp;"+k,resource:r,link:p,line:n,style:"function"==g?"functionNode":"propertyNode"},{text:h+"\x26nbsp;\x26nbsp;"+l,resource:r,link:p,line:n,style:"resourceNode"}])}b(e,c)})},null,"Search Outline")};b.replaceTokenInFiles=function(a,c,b){z(a,b,c,function(a){for(var c=
g.FileEditor.currentEditorState(),b=0;b<a.length;b++){var e=a[b],e=k.FileTree.createResourcePath("/resource/"+e.project+"/"+e.resource);c.getResource().getResourcePath()==e.getResourcePath()&&u.FileExplorer.openTreeFile(e.getResourcePath(),function(){})}})};b.searchFiles=function(a){y(!1,a)};b.searchAndReplaceFiles=function(a){y(!0,a)};b.findFileNames=function(){h.DialogBuilder.createListDialog(function(a,c,b){G(a,function(a,c){for(var e=[],d=0;d<a.length;d++){var f=a[d],g=window.document.location.pathname,
g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;e.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return b(e,c)})},null,"Find Files")};b.openTerminal=function(a){k.FileTree.isResourceFolder(a.filePath)&&d.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!0})};b.exploreDirectory=function(a){k.FileTree.isResourceFolder(a.filePath)&&d.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,
terminal:!1})};b.folderExpand=function(a){d.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};b.folderCollapse=function(a){d.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};b.pingProcess=function(){d.EventBus.isSocketOpen()&&d.EventBus.sendEvent("PING",document.title)};b.uploadFileTo=function(a,c,b){c=k.FileTree.createResourcePath(c);c=k.FileTree.cleanResourcePath(c.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+c);d.EventBus.sendEvent("UPLOAD",
{project:document.title,name:a,to:c,data:b,dragAndDrop:!0})};b.isDragAndDropFilePossible=function(a,c){return!0};b.dragAndDropFile=function(a,c){var b=k.FileTree.createResourcePath(a.resource),f=k.FileTree.createResourcePath(c.resource),g=k.FileTree.cleanResourcePath(b.getFilePath()),b=k.FileTree.cleanResourcePath(f.getFilePath()+"/"+b.getFileName());console.log("source: "+g+" destination: "+b);d.EventBus.sendEvent("RENAME",{project:document.title,from:g,to:b,dragAndDrop:!0});t.Project.renameEditorTab(g,
b)};b.renameFile=function(a){var c=a.getFilePath();h.DialogBuilder.renameFileTreeDialog(a,!0,function(b){var e={project:document.title,from:c,to:b.getFilePath(),dragAndDrop:!1};d.EventBus.sendEvent("RENAME",e);t.Project.renameEditorTab(a.getResourcePath(),b.getResourcePath())})};b.renameDirectory=function(a){var c=a.getFilePath();a=k.FileTree.createResourcePath(c+".#");h.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:document.title,from:c,to:a.getFilePath()};d.EventBus.sendEvent("RENAME",
a)})};b.newFile=function(a){h.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!k.FileTree.isResourceFolder(a.getFilePath())){var b={project:document.title,resource:a.getFilePath(),source:"",directory:!1,create:!0};n.ProcessConsole.clearConsole();d.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new u.FileResource(a,null,b,"",null,!1,!1);g.FileEditor.updateEditor(a)}})};b.newDirectory=function(a){h.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){k.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:document.title,resource:a.getFilePath(),source:"",directory:!0,create:!0},n.ProcessConsole.clearConsole(),d.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){A(function(){},!0)};b.saveEditor=v;b.saveEditorOnClose=function(a,b,e){null!=b&&b.getResourcePath()&&h.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:document.title,resource:b.getFilePath(),source:a,directory:!1,create:!1};d.EventBus.sendEvent("SAVE",c);e();g.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},
function(a){e();g.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};b.deleteFile=function(a){var b=g.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=b.getResource());null!=a&&(b="Delete resource "+b.getResource().getFilePath(),C.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:document.title,resource:a.getFilePath()};n.ProcessConsole.clearConsole();d.EventBus.sendEvent("DELETE",b);t.Project.deleteEditorTab(a.getResourcePath())},function(){}))};
b.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.getFilePath()},n.ProcessConsole.clearConsole(),d.EventBus.sendEvent("DELETE",a))};b.runScript=function(){B(!1)};b.debugScript=function(){B(!0)};b.updateScriptBreakpoints=function(){var a={breakpoints:g.FileEditor.currentEditorState().getBreakpoints(),project:document.title};d.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OVER"},
g.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},g.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},g.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&
(a={thread:a.thread,type:"RUN"},g.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stopScript=function(){d.EventBus.sendEvent("STOP")};b.browseScriptVariables=function(a){var b=l.ThreadManager.focusedThread();null!=b&&d.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};b.browseScriptEvaluation=function(a,b,e){var c=l.ThreadManager.focusedThread();null!=c&&d.EventBus.sendEvent("EVALUATE",{thread:c.thread,expression:b,expand:a,refresh:e})};b.attachProcess=function(a){var b=
D.DebugManager.currentStatusFocus(),e=g.FileEditor.currentEditorState();a={process:a,breakpoints:e.getBreakpoints(),project:document.title,focus:b!=a};d.EventBus.sendEvent("ATTACH",a)};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){d.EventBus.isSocketOpen()&&d.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=
function(){if(null!=l.ThreadManager.focusedThread()){var a=g.FileEditor.getSelectedText();h.DialogBuilder.evaluateExpressionDialog(a)}};b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(q.Command||(q.Command={}))});
