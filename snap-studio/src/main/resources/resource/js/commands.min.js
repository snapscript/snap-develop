define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(F,q,r,v,t,A,f,p,h,m,n,l,B,C){(function(b){function q(a,c){a&&1<a.length?r.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(d){var g=[],e;for(e in d)d.hasOwnProperty(e)&&g.push(e);g.sort();for(var b=[],k=0;k<g.length;k++)e=g[k],e=d[e],b.push({name:e.name,resource:e.resource,module:e.module,extra:e.extra,type:e.type,project:document.title});c(b,a)},
async:!0}):c([],a)}function D(a,c){if(a||""==a){var d=h.FileEditor.getCurrentLineForEditor(),g=h.FileEditor.loadEditor(),d=JSON.stringify({resource:g.resource.projectPath,line:d,complete:a.trim(),source:g.source});r.ajax({contentType:"application/json",data:d,dataType:"json",success:function(d){d=d.outlines;var g=[],b;for(b in d)if(d.hasOwnProperty(b)){var e=d[b];g.push({name:b,type:e.type,resource:e.resource,line:e.line,constraint:e.constraint})}c(g,a)},error:function(){c([],a);console.log("Could not complete outline")},
async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else c([],a)}function w(a,c){c||(c="*.snap,*.properties,*.xml,*.txt,*.json");var d=l.DialogBuilder.createTextSearchOnlyDialog;a&&(d=l.DialogBuilder.createTextSearchAndReplaceDialog);d(function(a,c,d,b){x(a,c,d,function(a,c){for(var d=[],g=0;g<a.length;g++){var e=a[g],k=window.document.location.pathname;k.indexOf(";debug",k.length-6);k="/resource/"+e.project+"/"+e.resource;d.push([{text:e.resource,line:e.line,resource:k,style:"resourceNode"},
{text:e.text,line:e.line,resource:k,style:"textNode"}])}return b(d,c)})},c,a?"Replace Text":"Find Text")}function x(a,c,d,g){if(a&&1<a.length){var b;b="/find/"+document.title;b+="?expression\x3d"+encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(c);b+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(d.replace);
b+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);r.ajax({url:b,success:function(c){for(var d=[],b=0;b<c.length;b++)d.push(c[b]);g(d,a)},async:!0})}else g([],a)}function E(a,c){a&&1<a.length?r.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(d){for(var b=[],e=0;e<d.length;e++)b.push(d[e]);c(b,a)},async:!0}):c([],a)}function y(a,c){var d=h.FileEditor.loadEditor();null==d.resource?l.DialogBuilder.openTreeDialog(null,!1,function(d){u(c);a()}):h.FileEditor.isEditorChanged()?
l.DialogBuilder.openTreeDialog(d.resource,!0,function(d){u(c);a()}):(p.ProcessConsole.clearConsole(),a())}function u(a){var c=h.FileEditor.loadEditor(),d=c.resource;if(null!=d){var b={project:document.title,resource:d.filePath,source:c.source,directory:!1,create:!1};p.ProcessConsole.clearConsole();f.EventBus.sendEvent("SAVE",b);a&&h.FileEditor.updateEditor(c.source,d.projectPath)}}function z(a){y(function(){var c=h.FileEditor.loadEditor();f.EventBus.sendEvent("EXECUTE",{breakpoints:c.breakpoints,
project:document.title,resource:c.resource.filePath,source:c.source,debug:a?!0:!1})},!0)}b.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,c,d){q(a,function(a,c){for(var b=[],k=0;k<a.length;k++){var e=window.document.location.pathname,g=-1!==e.indexOf(";debug",e.length-6),e="/project/"+a[k].project,f="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].module+"\x3ci\x3e",h="";a[k].extra&&(h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].extra+"\x3ci\x3e");g&&(e+=";debug");a[k].extra&&v.Common.stringEndsWith(a[k].extra,
".jar")?(g=v.Common.stringReplaceText(a[k].extra,"\\","/"),e+="#/decompile/"+g+"/"+a[k].module+"/"+a[k].name+".java"):e+="#"+a[k].resource;b.push([{text:a[k].name+"\x26nbsp;\x26nbsp;"+f,link:e,style:"module"==a[k].type?"moduleNode":"typeNode"},{text:a[k].resource+"\x26nbsp;\x26nbsp;"+h,link:e,style:"resourceNode"}])}d(b,c)})},null,"Search Types")};b.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,c,d){D(a,function(a,c){for(var b="/resource/"+document.title,e=[],g=0;g<a.length;g++){var f=
a[g],h=f.type.toLowerCase();e.push([{text:f.name+"\x26nbsp;\x26nbsp;"+("\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e"),resource:b+f.resource,line:f.line,style:"function"==h?"functionNode":"propertyNode"},{text:h,resource:b+f.resource,line:f.line,style:"textNode"}])}d(e,c)})},null,"Search Outline")};b.replaceTokenInFiles=function(a,c,b){x(a,b,c,function(a){for(var c=h.FileEditor.loadEditor(),b=0;b<a.length;b++){var d=a[b],d=m.FileTree.createResourcePath("/resource/"+d.project+"/"+d.resource);
c.resource.resourcePath==d.resourcePath&&B.FileExplorer.openTreeFile(d.resourcePath,function(){})}})};b.searchFiles=function(a){w(!1,a)};b.searchAndReplaceFiles=function(a){w(!0,a)};b.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,c,b){E(a,function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;d.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return b(d,
c)})},null,"Find Files")};b.openTerminal=function(a){m.FileTree.isResourceFolder(a.filePath)&&f.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!0})};b.exploreDirectory=function(a){m.FileTree.isResourceFolder(a.filePath)&&f.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!1})};b.folderExpand=function(a){f.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};b.folderCollapse=function(a){f.EventBus.sendEvent("FOLDER_COLLAPSE",
{project:document.title,folder:a})};b.pingProcess=function(){f.EventBus.isSocketOpen()&&f.EventBus.sendEvent("PING",document.title)};b.uploadFileTo=function(a,c,b){c=m.FileTree.createResourcePath(c);c=m.FileTree.cleanResourcePath(c.filePath+"/"+a);console.log("source: "+a+" destination: "+c);f.EventBus.sendEvent("UPLOAD",{project:document.title,name:a,to:c,data:b,dragAndDrop:!0})};b.isDragAndDropFilePossible=function(a,c){return!0};b.dragAndDropFile=function(a,c){var b=m.FileTree.createResourcePath(a.resource),
g=m.FileTree.createResourcePath(c.resource),e=m.FileTree.cleanResourcePath(b.filePath),b=m.FileTree.cleanResourcePath(g.filePath+"/"+b.fileName);console.log("source: "+e+" destination: "+b);f.EventBus.sendEvent("RENAME",{project:document.title,from:e,to:b,dragAndDrop:!0});t.Project.renameEditorTab(e,b)};b.renameFile=function(a){var c=a.filePath;l.DialogBuilder.renameFileTreeDialog(a,!0,function(b){f.EventBus.sendEvent("RENAME",{project:document.title,from:c,to:b.filePath,dragAndDrop:!1});t.Project.renameEditorTab(a.resourcePath,
b.resourcePath)})};b.renameDirectory=function(a){var b=a.filePath;a=m.FileTree.createResourcePath(b+".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){f.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:a.filePath})})};b.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!m.FileTree.isResourceFolder(a.filePath)){var b={project:document.title,resource:a.filePath,source:"",directory:!1,create:!0};p.ProcessConsole.clearConsole();f.EventBus.sendEvent("SAVE",
b);h.FileEditor.updateEditor("",a.projectPath)}})};b.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){m.FileTree.isResourceFolder(a.filePath)&&(a={project:document.title,resource:a.filePath,source:"",directory:!0,create:!0},p.ProcessConsole.clearConsole(),f.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){y(function(){},!0)};b.saveEditor=u;b.saveEditorOnClose=function(a,b){l.DialogBuilder.openTreeDialog(b,!0,function(c){f.EventBus.sendEvent("SAVE",{project:document.title,
resource:b.filePath,source:a,directory:!1,create:!1});h.FileEditor.clearSavedEditorBuffer(b.resourcePath)},function(a){h.FileEditor.clearSavedEditorBuffer(b.resourcePath)})};b.deleteFile=function(a){var b=h.FileEditor.loadEditor();null==a&&null!=b.resource&&(a=b.resource);null!=a&&(b=h.FileEditor.loadEditor(),A.Alerts.createConfirmAlert("Delete File","Delete resource "+b.resource.filePath,"Delete","Cancel",function(){var c={project:document.title,resource:a.filePath};p.ProcessConsole.clearConsole();
f.EventBus.sendEvent("DELETE",c);null!=b.resource&&b.resource.resourcePath==a.resourcePath&&h.FileEditor.resetEditor();t.Project.deleteEditorTab(a.resourcePath)},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.filePath},p.ProcessConsole.clearConsole(),f.EventBus.sendEvent("DELETE",a))};b.runScript=function(){z(!1)};b.debugScript=function(){z(!0)};b.updateScriptBreakpoints=function(){var a={breakpoints:h.FileEditor.loadEditor().breakpoints,project:document.title};
f.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OVER"},h.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},h.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},
h.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"RUN"},h.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stopScript=function(){f.EventBus.sendEvent("STOP")};b.browseScriptVariables=function(a){var b=n.ThreadManager.focusedThread();null!=b&&f.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};b.browseScriptEvaluation=function(a,b,d){var c=n.ThreadManager.focusedThread();
null!=c&&f.EventBus.sendEvent("EVALUATE",{thread:c.thread,expression:b,expand:a,refresh:d})};b.attachProcess=function(a){var b=C.DebugManager.currentStatusFocus(),d=h.FileEditor.loadEditor();f.EventBus.sendEvent("ATTACH",{process:a,breakpoints:d.breakpoints,project:document.title,focus:b!=a})};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+
";debug"+b};b.updateDisplay=function(a){f.EventBus.isSocketOpen()&&f.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=n.ThreadManager.focusedThread()){var a=h.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(q.Command||(q.Command={}))});
