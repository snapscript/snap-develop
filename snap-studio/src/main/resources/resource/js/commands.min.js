define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(H,r,q,w,u,t,g,p,h,l,m,k,v,D){(function(d){function r(a){return a&&w.Common.stringEndsWith(a,".jar")}function x(a,b){var c=w.Common.stringReplaceText(a,"\\","/"),f=b.substring(0,b.lastIndexOf(".")),e=b.substring(b.lastIndexOf(".")+1);return"/decompile/"+c+"/"+f+"/"+e+".java"}function E(a,b){a&&1<a.length?q.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(c){var f=
[],e;for(e in c)c.hasOwnProperty(e)&&f.push(e);f.sort();e=[];for(var d=0;d<f.length;d++){var n=c[f[d]];e.push({name:n.name,resource:n.resource,module:n.module,extra:n.extra,type:n.type,project:document.title})}b(e,a)},async:!0}):b([],a)}function F(a,b){if(a||""==a){var c=h.FileEditor.getCurrentLineForEditor(),f=h.FileEditor.currentEditorState(),e=JSON.stringify({resource:f.getResource().getProjectPath(),line:c,complete:a.trim(),source:f.getSource()});q.ajax({contentType:"application/json",data:e,
dataType:"json",success:function(c){c=c.outlines;var f=[],e;for(e in c)if(c.hasOwnProperty(e)){var d=c[e];f.push({name:e,type:d.type,resource:d.resource,line:d.line,constraint:d.constraint,declaringClass:d.declaringClass,libraryPath:d.libraryPath})}b(f,a)},error:function(c){b([],a);console.log("Could not complete outline for text '"+a+"'",e)},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else b([],a)}function y(a,b){b||(b="*.snap,*.properties,*.xml,*.txt,*.json");var c=k.DialogBuilder.createTextSearchOnlyDialog;
a&&(c=k.DialogBuilder.createTextSearchAndReplaceDialog);c(function(a,b,c,d){z(a,b,c,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=a[f],n=window.document.location.pathname;n.indexOf(";debug",n.length-6);n="/resource/"+e.project+"/"+e.resource;c.push([{text:e.resource,line:e.line,resource:n,style:"resourceNode"},{text:e.text,line:e.line,resource:n,style:"textNode"}])}return d(c,b)})},b,a?"Replace Text":"Find Text")}function z(a,b,c,f){if(a&&1<a.length){var e;e="/find/"+document.title;e+="?expression\x3d"+
encodeURIComponent(a);e+="\x26pattern\x3d"+encodeURIComponent(b);e+="\x26caseSensitive\x3d"+encodeURIComponent(c.caseSensitive);e+="\x26regularExpression\x3d"+encodeURIComponent(c.regularExpression);e+="\x26wholeWord\x3d"+encodeURIComponent(c.wholeWord);e+="\x26replace\x3d"+encodeURIComponent(c.replace);e+="\x26enableReplace\x3d"+encodeURIComponent(c.enableReplace);q.ajax({url:e,success:function(b){for(var c=[],e=0;e<b.length;e++)c.push(b[e]);f(c,a)},async:!0})}else f([],a)}function G(a,b){a&&1<a.length?
q.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(c){for(var f=[],e=0;e<c.length;e++)f.push(c[e]);b(f,a)},async:!0}):b([],a)}function A(a,b){var c=h.FileEditor.currentEditorState();null==c.getResource()?k.DialogBuilder.openTreeDialog(null,!1,function(c){c=B(a);b(c)}):h.FileEditor.isEditorChanged()?k.DialogBuilder.openTreeDialog(c.getResource(),!0,function(c){c=B(a);b(c)}):(p.ProcessConsole.clearConsole(),b(function(){}))}function B(a){var b=h.FileEditor.currentEditorState(),
c=b.getResource();if(null!=c){var f={project:document.title,resource:c.getFilePath(),source:b.getSource(),directory:!1,create:!1};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",f);if(a)return function(){var a=(new Date).getTime(),a=new v.FileResource(c,null,a,b.getSource(),null,!1,!1);h.FileEditor.updateEditor(a)}}return function(){}}function C(a,b){var c=h.FileEditor.currentEditorState(),f=function(a,b){var f=b.split(/[ ]+/),f={breakpoints:c.getBreakpoints(),arguments:f,project:document.title,
resource:c.getResource().getFilePath(),source:c.getSource(),debug:a?!0:!1};g.EventBus.sendEvent("EXECUTE",f)};h.FileEditor.setReadOnly(!0);A(!0,function(b){setTimeout(function(){var c=function(){setTimeout(function(){h.FileEditor.setReadOnly(!1);h.FileEditor.focusEditor();b()},400)};a?t.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){f(!0,a);c()},function(a){c()}):t.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){f(!1,a);c()},function(a){c()})},
1)})}d.searchTypes=function(){k.DialogBuilder.createListDialog(function(a,b,c){E(a,function(a,b){for(var d=[],e=0;e<a.length;e++){var f=window.document.location.pathname,f=-1!==f.indexOf(";debug",f.length-6),g="/project/"+a[e].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[e].module+"\x3ci\x3e",k="";a[e].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[e].extra+"\x3ci\x3e");f&&(g+=";debug");g=r(a[e].extra)?g+("#"+x(a[e].extra,a[e].module+"."+a[e].name)):g+("#"+a[e].resource);d.push([{text:a[e].name+
"\x26nbsp;\x26nbsp;"+h,link:g,style:"module"==a[e].type?"moduleNode":"typeNode"},{text:a[e].resource+"\x26nbsp;\x26nbsp;"+k,link:g,style:"resourceNode"}])}c(d,b)})},null,"Search Types")};d.searchOutline=function(){k.DialogBuilder.createListDialog(function(a,b,c){F(a,function(a,b){for(var e=[],d=0;d<a.length;d++){var f=a[d],g=f.type.toLowerCase(),h="\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e",k;k=f.declaringClass;k=k.substring(k.lastIndexOf(".")+1);var l=f.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+
l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",m=f.resource,p=f.line,q=null;r(f.libraryPath)&&f.declaringClass?(q="/project/"+document.title+"#"+x(f.libraryPath,f.declaringClass),p=null):m="/resource/"+document.title+m;e.push([{text:f.name+"\x26nbsp;\x26nbsp;"+h,resource:m,link:q,line:p,style:"function"==g?"functionNode":"propertyNode"},{text:k+"\x26nbsp;\x26nbsp;"+l,resource:m,link:q,line:p,style:"resourceNode"}])}c(e,b)})},null,"Search Outline")};d.replaceTokenInFiles=function(a,b,c){z(a,c,b,function(a){for(var b=
h.FileEditor.currentEditorState(),c=0;c<a.length;c++){var d=a[c],d=l.FileTree.createResourcePath("/resource/"+d.project+"/"+d.resource);b.getResource().getResourcePath()==d.getResourcePath()&&v.FileExplorer.openTreeFile(d.getResourcePath(),function(){})}})};d.searchFiles=function(a){y(!1,a)};d.searchAndReplaceFiles=function(a){y(!0,a)};d.findFileNames=function(){k.DialogBuilder.createListDialog(function(a,b,c){G(a,function(a,b){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,
g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+f.resource;d.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return c(d,b)})},null,"Find Files")};d.openTerminal=function(a){l.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),terminal:!0},g.EventBus.sendEvent("EXPLORE",a))};d.exploreDirectory=function(a){l.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),
terminal:!1},g.EventBus.sendEvent("EXPLORE",a))};d.folderExpand=function(a){g.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};d.folderCollapse=function(a){g.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};d.pingProcess=function(){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("PING",document.title)};d.uploadFileTo=function(a,b,c){b=l.FileTree.createResourcePath(b);b=l.FileTree.cleanResourcePath(b.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+
b);g.EventBus.sendEvent("UPLOAD",{project:document.title,name:a,to:b,data:c,dragAndDrop:!0})};d.isDragAndDropFilePossible=function(a,b){return!0};d.dragAndDropFile=function(a,b){var c=l.FileTree.createResourcePath(a.resource),d=l.FileTree.createResourcePath(b.resource),e=l.FileTree.cleanResourcePath(c.getFilePath()),c=l.FileTree.cleanResourcePath(d.getFilePath()+"/"+c.getFileName());console.log("source: "+e+" destination: "+c);g.EventBus.sendEvent("RENAME",{project:document.title,from:e,to:c,dragAndDrop:!0});
u.Project.renameEditorTab(e,c)};d.renameFile=function(a){var b=a.getFilePath();k.DialogBuilder.renameFileTreeDialog(a,!0,function(c){var d={project:document.title,from:b,to:c.getFilePath(),dragAndDrop:!1};g.EventBus.sendEvent("RENAME",d);u.Project.renameEditorTab(a.getResourcePath(),c.getResourcePath())})};d.renameDirectory=function(a){var b=a.getFilePath();a=l.FileTree.createResourcePath(b+".#");k.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:document.title,from:b,to:a.getFilePath()};
g.EventBus.sendEvent("RENAME",a)})};d.newFile=function(a){k.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!l.FileTree.isResourceFolder(a.getFilePath())){var b={project:document.title,resource:a.getFilePath(),source:"",directory:!1,create:!0};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new v.FileResource(a,null,b,"",null,!1,!1);h.FileEditor.updateEditor(a)}})};d.newDirectory=function(a){k.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){l.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:document.title,resource:a.getFilePath(),source:"",directory:!0,create:!0},p.ProcessConsole.clearConsole(),g.EventBus.sendEvent("SAVE",a))})};d.saveFile=function(){A(!0,function(a){a()})};d.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&k.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:document.title,resource:b.getFilePath(),source:a,directory:!1,create:!1};g.EventBus.sendEvent("SAVE",c);h.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){h.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};
d.deleteFile=function(a){var b=h.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=b.getResource());null!=a&&(b="Delete resource "+b.getResource().getFilePath(),t.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:document.title,resource:a.getFilePath()};p.ProcessConsole.clearConsole();g.EventBus.sendEvent("DELETE",b);u.Project.deleteEditorTab(a.getResourcePath())},function(){}))};d.deleteDirectory=function(a){null!=a&&(a={project:document.title,
resource:a.getFilePath()},p.ProcessConsole.clearConsole(),g.EventBus.sendEvent("DELETE",a))};d.createArchive=function(a,b){k.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:document.title,resource:b.getProjectPath(),archive:a.getProjectPath()};g.EventBus.sendEvent("CREATE_ARCHIVE",a)})};d.runScript=function(){C(!1)};d.debugScript=function(){C(!0)};d.attachRemoteDebugger=function(){g.EventBus.isSocketOpen()&&t.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e",
"Attach","Cancel",function(a){g.EventBus.sendEvent("REMOTE_DEBUG",{project:document.title,address:a})})};d.updateScriptBreakpoints=function(){var a={breakpoints:h.FileEditor.currentEditorState().getBreakpoints(),project:document.title};g.EventBus.sendEvent("BREAKPOINTS",a)};d.stepOverScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};d.stepInScript=function(){var a=m.ThreadManager.focusedThread();
null!=a&&(a={thread:a.getThread(),type:"STEP_IN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};d.stepOutScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};d.resumeScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},h.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};d.stopScript=function(){g.EventBus.sendEvent("STOP")};
d.browseScriptVariables=function(a){var b=m.ThreadManager.focusedThread();null!=b&&(a={thread:b.getThread(),expand:a},g.EventBus.sendEvent("BROWSE",a))};d.browseScriptEvaluation=function(a,b,c){var d=m.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:b,expand:a,refresh:c},g.EventBus.sendEvent("EVALUATE",a))};d.attachProcess=function(a){var b=D.DebugManager.currentStatusFocus(),c=h.FileEditor.currentEditorState();a={process:a,breakpoints:c.getBreakpoints(),project:document.title,
focus:b!=a};g.EventBus.sendEvent("ATTACH",a)};d.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};d.updateDisplay=function(a){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("DISPLAY_UPDATE",a)};d.evaluateExpression=function(){if(null!=m.ThreadManager.focusedThread()){var a=h.FileEditor.getSelectedText();k.DialogBuilder.evaluateExpressionDialog(a)}};
d.refreshScreen=function(){setTimeout(function(){location.reload()},10)};d.switchProject=function(){document.location="/"}})(r.Command||(r.Command={}))});
