define("require exports jquery project alert socket console editor tree threads dialog explorer debug".split(" "),function(C,n,p,q,y,d,l,f,g,k,h,z,A){(function(b){function n(a,c){a?p.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(a){var e=[],b;for(b in a)a.hasOwnProperty(b)&&e.push(b);e.sort();for(var d=[],r=0;r<e.length;r++)b=e[r],b=a[b],d.push({name:b.name,resource:b.resource,type:b.type,project:document.title});c(d)},async:!0}):c([])}function u(a,c){c||(c="*.snap,*.properties,*.xml,*.txt,*.json");
var e=h.DialogBuilder.createTextSearchOnlyDialog;a&&(e=h.DialogBuilder.createTextSearchAndReplaceDialog);e(function(a,c,e,b){v(a,c,e,function(a){for(var c=[],e=0;e<a.length;e++){var d=a[e],m=window.document.location.pathname;m.indexOf(";debug",m.length-6);m="/resource/"+d.project+"/"+d.resource;c.push([{text:d.resource,line:d.line,resource:m,style:"resourceNode"},{text:d.text,line:d.line,resource:m,style:"textNode"}])}return b(c)})},c,a?"Replace Text":"Find Text")}function v(a,c,e,b){if(a&&1<a.length){var d;
d="/find/"+document.title;d+="?expression\x3d"+encodeURIComponent(a);d+="\x26pattern\x3d"+encodeURIComponent(c);d+="\x26caseSensitive\x3d"+encodeURIComponent(e.caseSensitive);d+="\x26regularExpression\x3d"+encodeURIComponent(e.regularExpression);d+="\x26wholeWord\x3d"+encodeURIComponent(e.wholeWord);d+="\x26replace\x3d"+encodeURIComponent(e.replace);d+="\x26enableReplace\x3d"+encodeURIComponent(e.enableReplace);p.ajax({url:d,success:function(a){for(var c=[],e=0;e<a.length;e++)c.push(a[e]);b(c)},async:!0})}else b([])}
function B(a,c){a&&1<a.length?p.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(a){for(var e=[],b=0;b<a.length;b++)e.push(a[b]);c(e)},async:!0}):c([])}function w(a,c){var e=f.FileEditor.loadEditor();null==e.resource?h.DialogBuilder.openTreeDialog(null,!1,function(e){t(c);a()}):f.FileEditor.isEditorChanged()?h.DialogBuilder.openTreeDialog(e.resource,!0,function(e){t(c);a()}):(l.ProcessConsole.clearConsole(),a())}function t(a){var c=f.FileEditor.loadEditor(),e=c.resource;if(null!=
e){var b={project:document.title,resource:e.filePath,source:c.source,directory:!1,create:!1};l.ProcessConsole.clearConsole();d.EventBus.sendEvent("SAVE",b);a&&f.FileEditor.updateEditor(c.source,e.projectPath)}}function x(a){w(function(){var c=f.FileEditor.loadEditor();d.EventBus.sendEvent("EXECUTE",{breakpoints:c.breakpoints,project:document.title,resource:c.resource.filePath,source:c.source,debug:a?!0:!1})},!0)}b.searchTypes=function(){h.DialogBuilder.createListDialog(function(a,c,e){n(a,function(a){for(var c=
[],b=0;b<a.length;b++){var d=window.document.location.pathname,d=-1!==d.indexOf(";debug",d.length-6),f="/project/"+a[b].project;d&&(f+=";debug");f+="#"+a[b].resource;c.push([{text:a[b].name,link:f,style:"module"==a[b].type?"moduleNode":"typeNode"},{text:a[b].resource,link:f,style:"resourceNode"}])}e(c)})},null,"Search Types")};b.replaceTokenInFiles=function(a,c,b){v(a,b,c,function(a){for(var c=f.FileEditor.loadEditor(),b=0;b<a.length;b++){var e=a[b],e=g.FileTree.createResourcePath("/resource/"+e.project+
"/"+e.resource);c.resource.resourcePath==e.resourcePath&&z.FileExplorer.openTreeFile(e.resourcePath,function(){})}})};b.searchFiles=function(a){u(!1,a)};b.searchAndReplaceFiles=function(a){u(!0,a)};b.findFileNames=function(){h.DialogBuilder.createListDialog(function(a,c,b){B(a,function(a){for(var c=[],e=0;e<a.length;e++){var d=a[e],f=window.document.location.pathname,f=-1!==f.indexOf(";debug",f.length-6),g="/project/"+d.project;f&&(g+=";debug");g+="#"+d.resource;c.push([{text:d.text,name:d.name,link:g,
style:"resourceNode"}])}return b(c)})},null,"Find Files")};b.openTerminal=function(a){g.FileTree.isResourceFolder(a.filePath)&&d.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!0})};b.exploreDirectory=function(a){g.FileTree.isResourceFolder(a.filePath)&&d.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath,terminal:!1})};b.folderExpand=function(a){d.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};b.folderCollapse=function(a){d.EventBus.sendEvent("FOLDER_COLLAPSE",
{project:document.title,folder:a})};b.pingProcess=function(){d.EventBus.isSocketOpen()&&d.EventBus.sendEvent("PING",document.title)};b.uploadFileTo=function(a,c,b){c=g.FileTree.createResourcePath(c);c=g.FileTree.cleanResourcePath(c.filePath+"/"+a);console.log("source: "+a+" destination: "+c);d.EventBus.sendEvent("UPLOAD",{project:document.title,name:a,to:c,data:b,dragAndDrop:!0})};b.isDragAndDropFilePossible=function(a,c){return!0};b.dragAndDropFile=function(a,c){var b=g.FileTree.createResourcePath(a.resource),
f=g.FileTree.createResourcePath(c.resource),h=g.FileTree.cleanResourcePath(b.filePath),b=g.FileTree.cleanResourcePath(f.filePath+"/"+b.fileName);console.log("source: "+h+" destination: "+b);d.EventBus.sendEvent("RENAME",{project:document.title,from:h,to:b,dragAndDrop:!0});q.Project.renameEditorTab(h,b)};b.renameFile=function(a){var b=a.filePath;h.DialogBuilder.renameFileTreeDialog(a,!0,function(c){d.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:c.filePath,dragAndDrop:!1});q.Project.renameEditorTab(a.resourcePath,
c.resourcePath)})};b.renameDirectory=function(a){var b=a.filePath;a=g.FileTree.createResourcePath(b+".#");h.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){d.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:a.filePath})})};b.newFile=function(a){h.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!g.FileTree.isResourceFolder(a.filePath)){var b={project:document.title,resource:a.filePath,source:"",directory:!1,create:!0};l.ProcessConsole.clearConsole();d.EventBus.sendEvent("SAVE",
b);f.FileEditor.updateEditor("",a.projectPath)}})};b.newDirectory=function(a){h.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){g.FileTree.isResourceFolder(a.filePath)&&(a={project:document.title,resource:a.filePath,source:"",directory:!0,create:!0},l.ProcessConsole.clearConsole(),d.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){w(function(){},!0)};b.saveEditor=t;b.deleteFile=function(a){var b=f.FileEditor.loadEditor();null==a&&null!=b.resource&&(a=b.resource);null!=a&&(b=f.FileEditor.loadEditor(),
y.Alerts.createConfirmAlert("Delete File","Delete resource "+b.resource.filePath,"Delete","Cancel",function(){var c={project:document.title,resource:a.filePath};l.ProcessConsole.clearConsole();d.EventBus.sendEvent("DELETE",c);null!=b.resource&&b.resource.resourcePath==a.resourcePath&&f.FileEditor.resetEditor();q.Project.deleteEditorTab(a.resourcePath)},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.filePath},l.ProcessConsole.clearConsole(),d.EventBus.sendEvent("DELETE",
a))};b.runScript=function(){x(!1)};b.debugScript=function(){x(!0)};b.updateScriptBreakpoints=function(){var a={breakpoints:f.FileEditor.loadEditor().breakpoints,project:document.title};d.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=k.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OVER"},f.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=k.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},
f.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=k.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},f.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=k.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"RUN"},f.FileEditor.clearEditorHighlights(),d.EventBus.sendEvent("STEP",a))};b.stopScript=function(){d.EventBus.sendEvent("STOP")};b.browseScriptVariables=
function(a){var b=k.ThreadManager.focusedThread();null!=b&&d.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};b.browseScriptEvaluation=function(a,b,e){var c=k.ThreadManager.focusedThread();null!=c&&d.EventBus.sendEvent("EVALUATE",{thread:c.thread,expression:b,expand:a,refresh:e})};b.attachProcess=function(a){var b=A.DebugManager.currentStatusFocus(),e=f.FileEditor.loadEditor();d.EventBus.sendEvent("ATTACH",{process:a,breakpoints:e.breakpoints,project:document.title,focus:b!=a})};b.switchLayout=
function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){d.EventBus.isSocketOpen()&&d.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=k.ThreadManager.focusedThread()){var a=f.FileEditor.getSelectedText();h.DialogBuilder.evaluateExpressionDialog(a)}};b.refreshScreen=function(){setTimeout(function(){location.reload()},
10)};b.switchProject=function(){document.location="/"}})(n.Command||(n.Command={}))});
