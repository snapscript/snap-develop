define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(I,r,q,v,t,u,e,p,h,k,m,l,w,E){(function(b){function r(a){return a&&v.Common.stringEndsWith(a,".jar")}function x(a,d){var c=v.Common.stringReplaceText(a,"\\","/"),f=d.substring(0,d.lastIndexOf(".")),g=d.substring(d.lastIndexOf(".")+1);return"/decompile/"+c+"/"+f+"/"+g+".java"}function F(a,d){a&&1<a.length?q.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(c){var f=
[],g;for(g in c)c.hasOwnProperty(g)&&f.push(g);f.sort();g=[];for(var b=0;b<f.length;b++){var n=c[f[b]];g.push({name:n.name,resource:n.resource,module:n.module,extra:n.extra,type:n.type,project:document.title})}d(g,a)},async:!0}):d([],a)}function G(a,d){if(a||""==a){var c=h.FileEditor.getCurrentLineForEditor(),f=h.FileEditor.currentEditorState(),b=JSON.stringify({resource:f.getResource().getProjectPath(),line:c,complete:a.trim(),source:f.getSource()});q.ajax({contentType:"application/json",data:b,
dataType:"json",success:function(c){c=c.outlines;var f=[],b;for(b in c)if(c.hasOwnProperty(b)){var g=c[b];f.push({name:b,type:g.type,resource:g.resource,line:g.line,constraint:g.constraint,declaringClass:g.declaringClass,libraryPath:g.libraryPath})}d(f,a)},error:function(c){d([],a);console.log("Could not complete outline for text '"+a+"'",b)},async:!0,processData:!1,type:"POST",url:"/outline/"+document.title})}else d([],a)}function y(a,d){d||(d="*.snap,*.properties,*.xml,*.txt,*.json");var c=l.DialogBuilder.createTextSearchOnlyDialog;
a&&(c=l.DialogBuilder.createTextSearchAndReplaceDialog);c(function(a,d,c,b){z(a,d,c,function(a,d){for(var c=[],f=0;f<a.length;f++){var g=a[f],n=window.document.location.pathname;n.indexOf(";debug",n.length-6);n="/resource/"+g.project+"/"+g.resource;c.push([{text:g.resource,line:g.line,resource:n,style:"resourceNode"},{text:g.text,line:g.line,resource:n,style:"textNode"}])}return b(c,d)})},d,a?"Replace Text":"Find Text")}function z(a,d,c,f){if(a&&1<a.length){var b;b="/find/"+document.title;b+="?expression\x3d"+
encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(d);b+="\x26caseSensitive\x3d"+encodeURIComponent(c.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(c.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(c.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(c.replace);b+="\x26enableReplace\x3d"+encodeURIComponent(c.enableReplace);q.ajax({url:b,success:function(d){for(var c=[],b=0;b<d.length;b++)c.push(d[b]);f(c,a)},async:!0})}else f([],a)}function H(a,d){a&&1<a.length?
q.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(c){for(var f=[],b=0;b<c.length;b++)f.push(c[b]);d(f,a)},async:!0}):d([],a)}function A(a,d){if(null==h.FileEditor.currentEditorState().getResource())l.DialogBuilder.openTreeDialog(null,!1,function(c){c=B(a);d(c)});else if(h.FileEditor.isEditorChanged()){var c=B(a);d(c)}else p.ProcessConsole.clearConsole(),d(function(){})}function B(a){var d=h.FileEditor.currentEditorState(),c=d.getResource();if(null!=c){var b={project:document.title,
resource:c.getFilePath(),source:d.getSource(),directory:!1,create:!1};p.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",b);if(a)return function(){var a=(new Date).getTime(),a=new w.FileResource(c,null,a,d.getSource(),null,!1,!1);h.FileEditor.updateEditor(a)}}return function(){}}function C(a){A(!0,function(d){setTimeout(function(){var c=function(){setTimeout(function(){h.FileEditor.focusEditor();d()},1)};a?u.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){D(!0,
a);c()},function(a){c()}):u.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){D(!1,a);c()},function(a){c()})},1)})}function D(a,d){var c=h.FileEditor.currentEditorState(),b=d.split(/[ ]+/),c={breakpoints:c.getBreakpoints(),arguments:b,project:document.title,resource:c.getResource().getFilePath(),source:c.getSource(),debug:a?!0:!1};e.EventBus.sendEvent("EXECUTE",c)}b.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,d,c){F(a,function(a,d){for(var b=[],
f=0;f<a.length;f++){var g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),e="/project/"+a[f].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].module+"\x3ci\x3e",k="";a[f].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].extra+"\x3ci\x3e");g&&(e+=";debug");e=r(a[f].extra)?e+("#"+x(a[f].extra,a[f].module+"."+a[f].name)):e+("#"+a[f].resource);b.push([{text:a[f].name+"\x26nbsp;\x26nbsp;"+h,link:e,style:"module"==a[f].type?"moduleNode":"typeNode"},{text:a[f].resource+"\x26nbsp;\x26nbsp;"+
k,link:e,style:"resourceNode"}])}c(b,d)})},null,"Search Types")};b.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,d,c){G(a,function(a,d){for(var b=[],f=0;f<a.length;f++){var e=a[f],g=e.type.toLowerCase(),h="\x3ci style\x3d'opacity: 0.5'\x3e"+e.constraint+"\x3ci\x3e",k;k=e.declaringClass;k=k.substring(k.lastIndexOf(".")+1);var l=e.declaringClass,l="\x3ci style\x3d'opacity: 0.5'\x3e"+l.substring(0,l.lastIndexOf("."))+"\x3ci\x3e",m=e.resource,p=e.line,q=null;r(e.libraryPath)&&e.declaringClass?
(q="/project/"+document.title+"#"+x(e.libraryPath,e.declaringClass),p=null):m="/resource/"+document.title+m;b.push([{text:e.name+"\x26nbsp;\x26nbsp;"+h,resource:m,link:q,line:p,style:"function"==g?"functionNode":"propertyNode"},{text:k+"\x26nbsp;\x26nbsp;"+l,resource:m,link:q,line:p,style:"resourceNode"}])}c(b,d)})},null,"Search Outline")};b.replaceTokenInFiles=function(a,d,c){z(a,c,d,function(a){for(var d=h.FileEditor.currentEditorState(),c=0;c<a.length;c++){var b=a[c],b=k.FileTree.createResourcePath("/resource/"+
b.project+"/"+b.resource);d.getResource().getResourcePath()==b.getResourcePath()&&w.FileExplorer.openTreeFile(b.getResourcePath(),function(){})}})};b.searchFiles=function(a){y(!1,a)};b.searchAndReplaceFiles=function(a){y(!0,a)};b.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,d,c){H(a,function(a,d){for(var b=[],f=0;f<a.length;f++){var e=a[f],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+e.project;g&&(h+=";debug");h+="#"+e.resource;b.push([{text:e.text,
name:e.name,link:h,style:"resourceNode"}])}return c(b,d)})},null,"Find Files")};b.openTerminal=function(a){k.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),terminal:!0},e.EventBus.sendEvent("EXPLORE",a))};b.exploreDirectory=function(a){k.FileTree.isResourceFolder(a.getFilePath())&&(a={project:document.title,resource:a.getFilePath(),terminal:!1},e.EventBus.sendEvent("EXPLORE",a))};b.folderExpand=function(a){e.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,
folder:a})};b.folderCollapse=function(a){e.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};b.pingProcess=function(){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("PING",document.title)};b.uploadFileTo=function(a,d,c){d=k.FileTree.createResourcePath(d);d=k.FileTree.cleanResourcePath(d.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+d);e.EventBus.sendEvent("UPLOAD",{project:document.title,name:a,to:d,data:c,dragAndDrop:!0})};b.isDragAndDropFilePossible=function(a,
d){return!0};b.dragAndDropFile=function(a,d){var c=a.getResource(),b=d.getResource(),g=k.FileTree.cleanResourcePath(c.getFilePath()),b=k.FileTree.cleanResourcePath(b.getFilePath()+"/"+c.getFileName());console.log("source: "+g+" destination: "+b);e.EventBus.sendEvent("RENAME",{project:document.title,from:g,to:b,dragAndDrop:!0});if(a.isFolder())for(var c=a.getChildren(),h=0;h<c.length;h++){var l=c[h],m=v.Common.stringReplaceText(l,g,b);t.Project.renameEditorTab(k.FileTree.createResourcePath(l),k.FileTree.createResourcePath(m))}else t.Project.renameEditorTab(c,
k.FileTree.createResourcePath(b))};b.renameFile=function(a){var d=a.getFilePath();l.DialogBuilder.renameFileTreeDialog(a,!0,function(c){var b={project:document.title,from:d,to:c.getFilePath(),dragAndDrop:!1};e.EventBus.sendEvent("RENAME",b);t.Project.renameEditorTab(a,c)})};b.renameDirectory=function(a){var d=a.getFilePath();a=k.FileTree.createResourcePath(d+".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:document.title,from:d,to:a.getFilePath()};e.EventBus.sendEvent("RENAME",
a)})};b.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!k.FileTree.isResourceFolder(a.getFilePath())){var b={project:document.title,resource:a.getFilePath(),source:"",directory:!1,create:!0};p.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new w.FileResource(a,null,b,"",null,!1,!1);h.FileEditor.updateEditor(a)}})};b.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){k.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:document.title,resource:a.getFilePath(),source:"",directory:!0,create:!0},p.ProcessConsole.clearConsole(),e.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){A(!0,function(a){a()})};b.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&l.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:document.title,resource:b.getFilePath(),source:a,directory:!1,create:!1};e.EventBus.sendEvent("SAVE",c);h.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){h.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};
b.deleteFile=function(a){var b=h.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=b.getResource());null!=a&&(b="Delete resource "+b.getResource().getFilePath(),u.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:document.title,resource:a.getFilePath()};p.ProcessConsole.clearConsole();e.EventBus.sendEvent("DELETE",b);t.Project.deleteEditorTab(a.getResourcePath())},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:document.title,
resource:a.getFilePath()},p.ProcessConsole.clearConsole(),e.EventBus.sendEvent("DELETE",a))};b.createArchive=function(a,b){l.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:document.title,resource:b.getProjectPath(),archive:a.getProjectPath()};e.EventBus.sendEvent("CREATE_ARCHIVE",a)})};b.runScript=function(){C(!1)};b.debugScript=function(){C(!0)};b.attachRemoteDebugger=function(){e.EventBus.isSocketOpen()&&u.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e",
"Attach","Cancel",function(a){e.EventBus.sendEvent("REMOTE_DEBUG",{project:document.title,address:a})})};b.updateScriptBreakpoints=function(){var a={breakpoints:h.FileEditor.currentEditorState().getBreakpoints(),project:document.title};e.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},h.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=m.ThreadManager.focusedThread();
null!=a&&(a={thread:a.getThread(),type:"STEP_IN"},h.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},h.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=m.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},h.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.stopScript=function(){e.EventBus.sendEvent("STOP")};
b.browseScriptVariables=function(a){var b=m.ThreadManager.focusedThread();null!=b&&(a={thread:b.getThread(),expand:a},e.EventBus.sendEvent("BROWSE",a))};b.browseScriptEvaluation=function(a,b,c){var d=m.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:b,expand:a,refresh:c},e.EventBus.sendEvent("EVALUATE",a))};b.attachProcess=function(a){var b=E.DebugManager.currentStatusFocus(),c=h.FileEditor.currentEditorState();a={process:a,breakpoints:c.getBreakpoints(),project:document.title,
focus:b!=a};e.EventBus.sendEvent("ATTACH",a)};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=m.ThreadManager.focusedThread()){var a=h.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};
b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(r.Command||(r.Command={}))});
