define("require exports w2ui common socket tree editor project".split(" "),function(u,h,v,f,n,p,g,q){(function(k){function h(){f.Common.currentTime();var a={},c=0,d;for(d in e)if(e.hasOwnProperty(d)){var b=e[d];null!=b&&(b.isExpired()?a[d]=b:c++)}e=a;0<c&&l()}function l(){var a=[],c=1,d;for(d in e)if(e.hasOwnProperty(d)){var b=e[d];null!=b&&a.push({recid:c++,line:b.getLine(),location:"Line "+b.getLine(),resource:b.getResource().getFilePath(),description:b.getMessage(),project:b.getProject(),script:b.getResource().getResourcePath()})}f.Common.updateTableRecords(a,
"problems")&&q.Project.showProblemsTab()}function m(){var a=g.FileEditor.currentEditorState().getResource();if(null!=a){var c=[],d;for(d in e)if(e.hasOwnProperty(d))if(f.Common.stringStartsWith(d,a.getResourcePath())){var b=e[d];null!=b?(g.FileEditor.clearEditorHighlights(),c.push(b.getLine())):g.FileEditor.clearEditorHighlights()}else console.log("Clear highlights in "+a),g.FileEditor.clearEditorHighlights();0<c.length&&g.FileEditor.createMultipleEditorHighlights(c,"problemHighlight")}}function r(a,
c,d){c=JSON.parse(d);a=p.FileTree.createResourcePath(c.resource);c=new t(a,c.line,"\x3cdiv class\x3d'errorDescription'\x3e"+c.description+"\x3c/div\x3e",c.project,c.time);if(0<=c.getLine())e[c.getKey()]=c;else for(var b in e)e.hasOwnProperty(b)&&f.Common.stringStartsWith(b,a.getResourcePath())&&(e[b]=null);l();m()}var t=function(){function a(a,d,b,e,f){this._resource=a;this._line=d;this._message=b;this._project=e;this._time=f}a.prototype.isExpired=function(){return this._time+1E5>f.Common.currentTime()};
a.prototype.getKey=function(){return this._resource+":"+this._line};a.prototype.getResource=function(){return this._resource};a.prototype.getLine=function(){return this._line};a.prototype.getMessage=function(){return this._message};a.prototype.getProject=function(){return this._project};a.prototype.getTime=function(){return this._time};return a}(),e={};k.registerProblems=function(){n.EventBus.createRoute("PROBLEM",r);setInterval(h,1E3)};k.showProblems=l;k.highlightProblems=m})(h.ProblemManager||(h.ProblemManager=
{}))});
