define("require exports jquery common socket tree editor commands alert".split(" "),function(y,k,n,h,u,q,l,d,v){(function(p){function k(a,b,e){q.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,w,function(a,b){b.node.isFolder()||m(b.node.tooltip,function(){})})}function m(a,b){var e=a.toLowerCase();r(e)?n.ajax({url:a,type:"get",dataType:"text",success:function(c,e,f){e=f.getResponseHeader("content-type");g(a,b,c,e,a)},error:function(c){header.getResponseHeader("content-type");
g(a,b,"// Could not find "+e,"text/plain",a)},async:!1}):n.ajax({url:a,type:"get",success:function(c,e,f){e=f.getResponseHeader("content-type");g(a,b,c,e,a)},error:function(c){g(a,b,"// Could not find "+e,"text/plain",a)},async:!1})}function g(a,b,e,c,g){var f;f=c&&h.Common.stringStartsWith(c,"image")?!0:!1;f?window.open(g,"_blank").focus():x(c)?window.location.href=g:(l.FileEditor.resolveEditorMode(a),l.FileEditor.isEditorChanged()?(c="Save resource "+l.FileEditor.loadEditor().resource.filePath,
v.Alerts.createConfirmAlert("File Changed",c,"Save","Ignore",function(){d.Command.saveEditor(!0)},function(){l.FileEditor.updateEditor(e,a)})):l.FileEditor.updateEditor(e,a));b()}function r(a){return h.Common.stringEndsWith(a,".json")||h.Common.stringEndsWith(a,".js")||h.Common.stringEndsWith(a,".xml")||h.Common.stringEndsWith(a,".project")||h.Common.stringEndsWith(a,".classpath")}function x(a){return a?"application/json"==a||"application/x-javascript"==a?!1:h.Common.stringStartsWith(a,"application")||
h.Common.stringStartsWith(a,"image")?!0:h.Common.stringStartsWith(a,"text")?!1:!0:!1}function w(a,b,e,c){"runScript"==b?m(a.resourcePath,function(){d.Command.runScript()}):"debugScript"==b?m(a.resourcePath,function(){d.Command.debugScript()}):"newFile"==b?d.Command.newFile(a):"newDirectory"==b?d.Command.newDirectory(a):"exploreDirectory"==b?d.Command.exploreDirectory(a):"openTerminal"==b?d.Command.openTerminal(a):"renameFile"==b?c?d.Command.renameDirectory(a):d.Command.renameFile(a):"saveFile"==b?
m(a.resourcePath,function(){d.Command.saveFile()}):"deleteFile"==b&&(q.FileTree.isResourceFolder(a.resourcePath)?d.Command.deleteDirectory(a):d.Command.deleteFile(a))}var t=!1;p.showTree=function(){0==t&&(window.setTimeout(k,500),t=!0);u.EventBus.createRoute("RELOAD_TREE",k)};p.openTreeFile=m;p.openTreeHistoryFile=function(a,b,e){var c=a.toLowerCase(),d=a.replace(/^\/resource/i,"/history");if(r(c)){var f=d+"?time\x3d"+b;n.ajax({url:f,type:"get",dataType:"text",success:function(b,c,d){c=d.getResponseHeader("content-type");
g(a,e,b,c,f)},error:function(b){g(a,e,"// Could not find "+c,"text/plain",f)},async:!1})}else f=d+"?time\x3d"+b,n.ajax({url:f,type:"get",success:function(b,c,d){c=d.getResponseHeader("content-type");g(a,e,b,c,f)},error:function(b){g(a,e,"// Could not find "+c,"text/plain",f)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
