define("require exports jquery common socket tree editor commands alert".split(" "),function(x,k,n,h,t,q,l,e,u){(function(p){function k(a,b,d){q.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,v,function(a,b){b.node.isFolder()||m(b.node.tooltip,function(){})})}function m(a,b){var d=a.toLowerCase();h.Common.stringEndsWith(d,".json")||h.Common.stringEndsWith(d,".js")||h.Common.stringEndsWith(d,".xml")?n.ajax({url:a,type:"get",dataType:"text",success:function(c,d,f){d=f.getResponseHeader("content-type");
g(a,b,c,d,a)},error:function(c){header.getResponseHeader("content-type");g(a,b,"// Could not find "+d,"text/plain",a)},async:!1}):n.ajax({url:a,type:"get",success:function(c,d,f){d=f.getResponseHeader("content-type");g(a,b,c,d,a)},error:function(c){g(a,b,"// Could not find "+d,"text/plain",a)},async:!1})}function g(a,b,d,c,g){var f;f=c&&h.Common.stringStartsWith(c,"image")?!0:!1;f?window.open(g,"_blank").focus():w(c)?window.location.href=g:(l.FileEditor.resolveEditorMode(a),l.FileEditor.isEditorChanged()?
(c="Save resource "+l.FileEditor.loadEditor().resource.filePath,u.Alerts.createConfirmAlert("File Changed",c,"Save","Ignore",function(){e.Command.saveEditor(!0)},function(){l.FileEditor.updateEditor(d,a)})):l.FileEditor.updateEditor(d,a));b()}function w(a){return a?"application/json"==a||"application/x-javascript"==a?!1:h.Common.stringStartsWith(a,"application")||h.Common.stringStartsWith(a,"image")?!0:h.Common.stringStartsWith(a,"text")?!1:!0:!1}function v(a,b,d,c){"runScript"==b?m(a.resourcePath,
function(){e.Command.runScript()}):"debugScript"==b?m(a.resourcePath,function(){e.Command.debugScript()}):"newFile"==b?e.Command.newFile(a):"newDirectory"==b?e.Command.newDirectory(a):"exploreDirectory"==b?e.Command.exploreDirectory(a):"renameFile"==b?c?e.Command.renameDirectory(a):e.Command.renameFile(a):"saveFile"==b?m(a.resourcePath,function(){e.Command.saveFile()}):"deleteFile"==b&&(q.FileTree.isResourceFolder(a.resourcePath)?e.Command.deleteDirectory(a):e.Command.deleteFile(a))}var r=!1;p.showTree=
function(){0==r&&(window.setTimeout(k,500),r=!0);t.EventBus.createRoute("RELOAD_TREE",k)};p.openTreeFile=m;p.openTreeHistoryFile=function(a,b,d){var c=a.toLowerCase(),e=a.replace(/^\/resource/i,"/history");if(h.Common.stringEndsWith(c,".json")||h.Common.stringEndsWith(c,".js")||h.Common.stringEndsWith(c,".xml")){var f=e+"?time\x3d"+b;n.ajax({url:f,type:"get",dataType:"text",success:function(b,c,e){c=e.getResponseHeader("content-type");g(a,d,b,c,f)},error:function(b){g(a,d,"// Could not find "+c,"text/plain",
f)},async:!1})}else f=e+"?time\x3d"+b,n.ajax({url:f,type:"get",success:function(b,c,e){c=e.getResponseHeader("content-type");g(a,d,b,c,f)},error:function(b){g(a,d,"// Could not find "+c,"text/plain",f)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
