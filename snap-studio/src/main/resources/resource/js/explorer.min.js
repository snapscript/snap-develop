define("require exports jquery common socket tree editor commands".split(" "),function(y,k,l,f,u,n,v,d){var p=function(){function b(b,f,d,g,h,l,k){this._resourcePath=b;this._contentType=f;this._lastModified=d;this._fileContent=g;this._downloadURL=h;this._isHistorical=l;this._isError=k}b.prototype.getFileContent=function(){if(this._fileContent){var b=this._resourcePath.getResourcePath().toLowerCase();if(f.Common.stringEndsWith(b,".json"))try{var d=JSON.parse(this._fileContent);return JSON.stringify(d,
null,3)}catch(m){}return this._fileContent}return""};b.prototype.getResourcePath=function(){return this._resourcePath};b.prototype.getContentType=function(){return this._contentType};b.prototype.getDownloadURL=function(){return this._downloadURL};b.prototype.getTimeStamp=function(){return f.Common.formatTimeMillis(this._lastModified)};b.prototype.getLastModified=function(){return this._lastModified};b.prototype.getFileLength=function(){return this._fileContent?this._fileContent.length:-1};b.prototype.isHistorical=
function(){return this._isHistorical};b.prototype.isError=function(){return this._isError};return b}();k.FileResource=p;(function(b){function k(a,e,c){q()}function q(){n.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,w,function(a,e){e.node.isFolder()||m(e.node.tooltip,function(){})})}function m(a,e){var c=a.toLowerCase();r(c)?l.ajax({url:a,type:"get",dataType:"text",success:function(c,b,d){c=g(a,a,d,c,!1,!1);h(c,e)},error:function(c){c=g(a,a,null,c,!1,!0);h(c,e)},async:!1}):
l.ajax({url:a,type:"get",success:function(c,b,d){c=g(a,a,d,c,!1,!1);h(c,e)},error:function(c){c=g(a,a,null,c,!1,!0);h(c,e)},async:!1})}function g(a,e,c,b,d,f){var t=n.FileTree.createResourcePath(a),g=(new Date).getTime(),h="application/octet-stream";return c&&null!=b?(a=c.getResponseHeader("content-type"),(c=c.getResponseHeader("last-modified"))&&(g=(new Date(c)).getTime()),a&&(h=a),new p(t,h,g,b,e,d,f)):new p(t,h,g,"// Count not find "+a,e,d,f)}function h(a,e){var c;c=(c=a.getContentType())&&f.Common.stringStartsWith(c,
"image")?!0:!1;c?(c=a.getDownloadURL(),window.open(c,"_blank").focus()):(c=a.getContentType())&&("application/json"==c||"application/x-javascript"==c?0:f.Common.stringStartsWith(c,"application")||f.Common.stringStartsWith(c,"image")||!f.Common.stringStartsWith(c,"text"))?window.location.href=a.getDownloadURL():v.FileEditor.updateEditor(a);e()}function r(a){return f.Common.stringEndsWith(a,".json")||f.Common.stringEndsWith(a,".js")||f.Common.stringEndsWith(a,".xml")||f.Common.stringEndsWith(a,".project")||
f.Common.stringEndsWith(a,".classpath")||f.Common.stringEndsWith(a,".index")}function w(a,e,c,b){"runScript"==e?m(a.getResourcePath(),function(){d.Command.runScript()}):"debugScript"==e?m(a.getResourcePath(),function(){d.Command.debugScript()}):"newFile"==e?d.Command.newFile(a):"newDirectory"==e?d.Command.newDirectory(a):"exploreDirectory"==e?d.Command.exploreDirectory(a):"openTerminal"==e?d.Command.openTerminal(a):"renameFile"==e?b?d.Command.renameDirectory(a):d.Command.renameFile(a):"saveFile"==
e?m(a.getResourcePath(),function(){d.Command.saveFile()}):"deleteFile"==e&&(n.FileTree.isResourceFolder(a.getResourcePath())?d.Command.deleteDirectory(a):d.Command.deleteFile(a))}var x=function(){function a(a,c){this._contentType=a;this._lastModified=c}a.prototype.getResponseHeader=function(a){a=a.toLowerCase();return"content-type"==a?this._contentType:"last-modified"==a?this._lastModified:null};return a}();b.showTree=function(){q();u.EventBus.createRoute("RELOAD_TREE",k)};b.showAsTreeFile=function(a,
e,c){a.toLowerCase();var b=new x("text/plain",(new Date).getTime());a=g(a,a,b,e,!1,!1);h(a,c)};b.openTreeFile=m;b.openTreeHistoryFile=function(a,b,c){var e=a.toLowerCase(),d=a.replace(/^\/resource/i,"/history");if(r(e)){var f=d+"?time\x3d"+b;l.ajax({url:f,type:"get",dataType:"text",success:function(b,e,d){b=g(a,f,d,b,!0,!1);h(b,c)},error:function(b){b=g(a,f,null,b,!0,!0);h(b,c)},async:!1})}else f=d+"?time\x3d"+b,l.ajax({url:f,type:"get",success:function(b,e,d){b=g(a,f,d,b,!0,!1);h(b,c)},error:function(b){b=
g(a,f,null,b,!0,!0);h(b,c)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
