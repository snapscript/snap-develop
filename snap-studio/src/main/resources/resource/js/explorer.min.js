define("require exports jquery common socket tree editor commands".split(" "),function(w,h,l,f,u,n,p,b){(function(m){function h(a,d,b){n.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,v,function(a,d){d.node.isFolder()||k(d.node.tooltip,function(){})})}function k(a,d){var b=a.toLowerCase();q(b)?l.ajax({url:a,type:"get",dataType:"text",success:function(c,b,e){b=e.getResponseHeader("content-type");e=e.getResponseHeader("last-modified");e=(new Date(e)).getTime();g(a,d,c,b,a,
e)},error:function(c){g(a,d,"// Could not find "+a,"text/plain",a,-1)},async:!1}):l.ajax({url:a,type:"get",success:function(c,b,e){b=e.getResponseHeader("content-type");e=e.getResponseHeader("last-modified");e=(new Date(e)).getTime();g(a,d,c,b,a,e)},error:function(b){g(a,d,"// Could not find "+a,"text/plain",a,-1)},async:!1})}function g(a,d,b,c,g,e){var r;r=c&&f.Common.stringStartsWith(c,"image")?!0:!1;r?window.open(g,"_blank").focus():c&&("application/json"==c||"application/x-javascript"==c?0:f.Common.stringStartsWith(c,
"application")||f.Common.stringStartsWith(c,"image")||!f.Common.stringStartsWith(c,"text"))?window.location.href=g:(p.FileEditor.resolveEditorMode(a),p.FileEditor.updateEditor(b,a,e),console.log("OPEN: "+a));d()}function q(a){return f.Common.stringEndsWith(a,".json")||f.Common.stringEndsWith(a,".js")||f.Common.stringEndsWith(a,".xml")||f.Common.stringEndsWith(a,".project")||f.Common.stringEndsWith(a,".classpath")||f.Common.stringEndsWith(a,".index")}function v(a,d,g,c){"runScript"==d?k(a.resourcePath,
function(){b.Command.runScript()}):"debugScript"==d?k(a.resourcePath,function(){b.Command.debugScript()}):"newFile"==d?b.Command.newFile(a):"newDirectory"==d?b.Command.newDirectory(a):"exploreDirectory"==d?b.Command.exploreDirectory(a):"openTerminal"==d?b.Command.openTerminal(a):"renameFile"==d?c?b.Command.renameDirectory(a):b.Command.renameFile(a):"saveFile"==d?k(a.resourcePath,function(){b.Command.saveFile()}):"deleteFile"==d&&(n.FileTree.isResourceFolder(a.resourcePath)?b.Command.deleteDirectory(a):
b.Command.deleteFile(a))}var t=!1;m.showTree=function(){0==t&&(window.setTimeout(h,500),t=!0);u.EventBus.createRoute("RELOAD_TREE",h)};m.openTreeFile=k;m.openTreeHistoryFile=function(a,b,f){var d=a.toLowerCase(),h=a.replace(/^\/resource/i,"/history");if(q(d)){var e=h+"?time\x3d"+b;l.ajax({url:e,type:"get",dataType:"text",success:function(b,d,c){d=c.getResponseHeader("content-type");c=c.getResponseHeader("last-modified");c=(new Date(c)).getTime();g(a,f,b,d,e,c)},error:function(b){g(a,f,"// Could not find "+
a,"text/plain",e,-1)},async:!1})}else e=h+"?time\x3d"+b,l.ajax({url:e,type:"get",success:function(b,d,c){d=c.getResponseHeader("content-type");c=c.getResponseHeader("last-modified");c=(new Date(c)).getTime();g(a,f,b,d,e,c)},error:function(b){g(a,f,"// Could not find "+a,"text/plain",e,-1)},async:!1})}})(h.FileExplorer||(h.FileExplorer={}))});
