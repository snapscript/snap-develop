define("require exports jquery common socket tree editor commands".split(" "),function(x,k,m,e,v,p,q,d){(function(n){function k(a,c,b){p.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,w,function(a,b){b.node.isFolder()||l(b.node.tooltip,function(){})})}function l(a,c){var b=a.toLowerCase();r(b)?m.ajax({url:a,type:"get",dataType:"text",success:function(b,d,f){b=g(a,a,f,b);h(b,c)},error:function(b){b=g(a,a,null,b);h(b,c)},async:!1}):m.ajax({url:a,type:"get",success:function(b,
d,f){b=g(a,a,f,b);h(b,c)},error:function(b){b=g(a,a,null,b);h(b,c)},async:!1})}function g(a,c,b,d){var e=(new Date).getTime(),f="application/octet-stream";if(b&&d){var t=b.getResponseHeader("content-type");(b=b.getResponseHeader("last-modified"))&&(e=(new Date(b)).getTime());t&&(f=t);return{resourcePath:a,contentType:f,lastModified:e,responseEntity:d,downloadURL:c}}return{resourcePath:a,contentType:"text/plain",lastModified:e,responseEntity:"// Count not find "+path,downloadURL:c}}function h(a,c){var b;
b=(b=a.contentType)&&e.Common.stringStartsWith(b,"image")?!0:!1;b?window.open(a.downloadURL,"_blank").focus():(b=a.contentType)&&("application/json"==b||"application/x-javascript"==b?0:e.Common.stringStartsWith(b,"application")||e.Common.stringStartsWith(b,"image")||!e.Common.stringStartsWith(b,"text"))?window.location.href=a.downloadURL:(q.FileEditor.resolveEditorMode(a.resourcePath),q.FileEditor.updateEditor(a.responseEntity,a.resourcePath,a.lastModified),console.log("OPEN: "+a.resourcePath));c()}
function r(a){return e.Common.stringEndsWith(a,".json")||e.Common.stringEndsWith(a,".js")||e.Common.stringEndsWith(a,".xml")||e.Common.stringEndsWith(a,".project")||e.Common.stringEndsWith(a,".classpath")||e.Common.stringEndsWith(a,".index")}function w(a,c,b,e){"runScript"==c?l(a.resourcePath,function(){d.Command.runScript()}):"debugScript"==c?l(a.resourcePath,function(){d.Command.debugScript()}):"newFile"==c?d.Command.newFile(a):"newDirectory"==c?d.Command.newDirectory(a):"exploreDirectory"==c?d.Command.exploreDirectory(a):
"openTerminal"==c?d.Command.openTerminal(a):"renameFile"==c?e?d.Command.renameDirectory(a):d.Command.renameFile(a):"saveFile"==c?l(a.resourcePath,function(){d.Command.saveFile()}):"deleteFile"==c&&(p.FileTree.isResourceFolder(a.resourcePath)?d.Command.deleteDirectory(a):d.Command.deleteFile(a))}var u=!1;n.showTree=function(){0==u&&(window.setTimeout(k,500),u=!0);v.EventBus.createRoute("RELOAD_TREE",k)};n.openTreeFile=l;n.openTreeHistoryFile=function(a,c,b){var e=a.toLowerCase(),d=a.replace(/^\/resource/i,
"/history");if(r(e)){var f=d+"?time\x3d"+c;m.ajax({url:f,type:"get",dataType:"text",success:function(c,d,e){c=g(a,f,e,c);h(c,b)},error:function(c){c=g(a,f,null,c);h(c,b)},async:!1})}else f=d+"?time\x3d"+c,m.ajax({url:f,type:"get",success:function(c,e,d){c=g(a,f,d,c);h(c,b)},error:function(c){c=g(a,f,null,c);h(c,b)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
