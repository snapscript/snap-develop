define("require exports jquery common socket tree editor commands".split(" "),function(y,k,l,e,w,p,q,c){var n=function(){function c(c,e,g,h,l){this.resourcePath=c;this.contentType=e;this.lastModified=g;this.fileContent=h;this.downloadURL=l}c.prototype.getTimeStamp=function(){return e.Common.formatTimeMillis(this.lastModified)};c.prototype.getFileLength=function(){return this.fileContent?this.fileContent.length:-1};return c}();k.FileResource=n;(function(k){function r(a,d,b){p.FileTree.createTree("/"+
document.title,"explorer","explorerTree","/.",!1,x,function(a,b){b.node.isFolder()||m(b.node.tooltip,function(){})})}function m(a,d){var b=a.toLowerCase();t(b)?l.ajax({url:a,type:"get",dataType:"text",success:function(b,c,f){b=g(a,a,f,b);h(b,d)},error:function(b){b=g(a,a,null,b);h(b,d)},async:!1}):l.ajax({url:a,type:"get",success:function(b,c,f){b=g(a,a,f,b);h(b,d)},error:function(b){b=g(a,a,null,b);h(b,d)},async:!1})}function g(a,d,b,c){var e=(new Date).getTime(),f="application/octet-stream";if(b&&
c){var u=b.getResponseHeader("content-type");(b=b.getResponseHeader("last-modified"))&&(e=(new Date(b)).getTime());u&&(f=u);return new n(a,f,e,c,d)}return new n(a,f,e,"// Count not find "+a,d)}function h(a,d){var b;b=(b=a.contentType)&&e.Common.stringStartsWith(b,"image")?!0:!1;b?window.open(a.downloadURL,"_blank").focus():(b=a.contentType)&&("application/json"==b||"application/x-javascript"==b?0:e.Common.stringStartsWith(b,"application")||e.Common.stringStartsWith(b,"image")||!e.Common.stringStartsWith(b,
"text"))?window.location.href=a.downloadURL:(q.FileEditor.resolveEditorMode(a.resourcePath),q.FileEditor.updateEditor(a),console.log("OPEN: "+a.resourcePath));d()}function t(a){return e.Common.stringEndsWith(a,".json")||e.Common.stringEndsWith(a,".js")||e.Common.stringEndsWith(a,".xml")||e.Common.stringEndsWith(a,".project")||e.Common.stringEndsWith(a,".classpath")||e.Common.stringEndsWith(a,".index")}function x(a,d,b,e){"runScript"==d?m(a.resourcePath,function(){c.Command.runScript()}):"debugScript"==
d?m(a.resourcePath,function(){c.Command.debugScript()}):"newFile"==d?c.Command.newFile(a):"newDirectory"==d?c.Command.newDirectory(a):"exploreDirectory"==d?c.Command.exploreDirectory(a):"openTerminal"==d?c.Command.openTerminal(a):"renameFile"==d?e?c.Command.renameDirectory(a):c.Command.renameFile(a):"saveFile"==d?m(a.resourcePath,function(){c.Command.saveFile()}):"deleteFile"==d&&(p.FileTree.isResourceFolder(a.resourcePath)?c.Command.deleteDirectory(a):c.Command.deleteFile(a))}var v=!1;k.showTree=
function(){0==v&&(window.setTimeout(r,500),v=!0);w.EventBus.createRoute("RELOAD_TREE",r)};k.openTreeFile=m;k.openTreeHistoryFile=function(a,d,b){var c=a.toLowerCase(),e=a.replace(/^\/resource/i,"/history");if(t(c)){var f=e+"?time\x3d"+d;l.ajax({url:f,type:"get",dataType:"text",success:function(c,d,e){c=g(a,f,e,c);h(c,b)},error:function(c){c=g(a,f,null,c);h(c,b)},async:!1})}else f=e+"?time\x3d"+d,l.ajax({url:f,type:"get",success:function(c,e,d){c=g(a,f,d,c);h(c,b)},error:function(c){c=g(a,f,null,c);
h(c,b)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
