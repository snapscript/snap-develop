define("require exports jquery common socket tree editor commands".split(" "),function(y,k,l,e,w,p,r,f){var q=function(){function d(d,e,f,g,h,l,k){this._resourcePath=d;this._contentType=e;this._lastModified=f;this._fileContent=g;this._downloadURL=h;this._isHistorical=l;this._isError=k}d.prototype.getResourcePath=function(){return this._resourcePath};d.prototype.getContentType=function(){return this._contentType};d.prototype.getFileContent=function(){return this._fileContent};d.prototype.getDownloadURL=
function(){return this._downloadURL};d.prototype.getTimeStamp=function(){return e.Common.formatTimeMillis(this._lastModified)};d.prototype.getLastModified=function(){return this._lastModified};d.prototype.getFileLength=function(){return this._fileContent?this._fileContent.length:-1};d.prototype.isHistorical=function(){return this._isHistorical};d.prototype.isError=function(){return this._isError};return d}();k.FileResource=q;(function(d){function k(a,c,b){t()}function t(){p.FileTree.createTree("/"+
document.title,"explorer","explorerTree","/.",!1,x,function(a,c){c.node.isFolder()||n(c.node.tooltip,function(){})})}function n(a,c){var b=a.toLowerCase();u(b)?l.ajax({url:a,type:"get",dataType:"text",success:function(b,d,m){b=g(a,a,m,b,!1,!1);h(b,c)},error:function(b){b=g(a,a,null,b,!1,!0);h(b,c)},async:!1}):l.ajax({url:a,type:"get",success:function(b,d,m){b=g(a,a,m,b,!1,!1);h(b,c)},error:function(b){b=g(a,a,null,b,!1,!0);h(b,c)},async:!1})}function g(a,c,b,d,e,m){var v=p.FileTree.createResourcePath(a),
f=(new Date).getTime(),g="application/octet-stream";return b&&d?(a=b.getResponseHeader("content-type"),(b=b.getResponseHeader("last-modified"))&&(f=(new Date(b)).getTime()),a&&(g=a),new q(v,g,f,d,c,e,m)):new q(v,g,f,"// Count not find "+a,c,e,m)}function h(a,c){var b;b=(b=a.getContentType())&&e.Common.stringStartsWith(b,"image")?!0:!1;b?(b=a.getDownloadURL(),window.open(b,"_blank").focus()):(b=a.getContentType())&&("application/json"==b||"application/x-javascript"==b?0:e.Common.stringStartsWith(b,
"application")||e.Common.stringStartsWith(b,"image")||!e.Common.stringStartsWith(b,"text"))?window.location.href=a.getDownloadURL():(r.FileEditor.resolveEditorMode(a.getResourcePath().getResourcePath()),r.FileEditor.updateEditor(a),console.log("OPEN: "+a.getResourcePath().getResourcePath()));c()}function u(a){return e.Common.stringEndsWith(a,".json")||e.Common.stringEndsWith(a,".js")||e.Common.stringEndsWith(a,".xml")||e.Common.stringEndsWith(a,".project")||e.Common.stringEndsWith(a,".classpath")||
e.Common.stringEndsWith(a,".index")}function x(a,c,b,d){"runScript"==c?n(a.resourcePath,function(){f.Command.runScript()}):"debugScript"==c?n(a.resourcePath,function(){f.Command.debugScript()}):"newFile"==c?f.Command.newFile(a):"newDirectory"==c?f.Command.newDirectory(a):"exploreDirectory"==c?f.Command.exploreDirectory(a):"openTerminal"==c?f.Command.openTerminal(a):"renameFile"==c?d?f.Command.renameDirectory(a):f.Command.renameFile(a):"saveFile"==c?n(a.resourcePath,function(){f.Command.saveFile()}):
"deleteFile"==c&&(p.FileTree.isResourceFolder(a.resourcePath)?f.Command.deleteDirectory(a):f.Command.deleteFile(a))}d.showTree=function(){t();w.EventBus.createRoute("RELOAD_TREE",k)};d.openTreeFile=n;d.openTreeHistoryFile=function(a,c,b){var d=a.toLowerCase(),f=a.replace(/^\/resource/i,"/history");if(u(d)){var e=f+"?time\x3d"+c;l.ajax({url:e,type:"get",dataType:"text",success:function(c,d,f){c=g(a,e,f,c,!0,!1);h(c,b)},error:function(c){c=g(a,e,null,c,!0,!0);h(c,b)},async:!1})}else e=f+"?time\x3d"+
c,l.ajax({url:e,type:"get",success:function(c,d,f){c=g(a,e,f,c,!0,!1);h(c,b)},error:function(c){c=g(a,e,null,c,!0,!0);h(c,b)},async:!1})}})(k.FileExplorer||(k.FileExplorer={}))});
