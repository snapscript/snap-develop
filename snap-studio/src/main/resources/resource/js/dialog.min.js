define("require exports jquery w2ui common commands variables explorer editor tree".split(" "),function(S,y,b,h,m,C,D,H,I,k){(function(n){function u(a,c,e,d,f,g,l){var v="/";null!=a&&(v=a.projectDirectory);var t=L(v,""),E=function(){var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()},J=function(){var a=b("#dialogPath").html(),c=b("#dialogFolder").html(),a=k.FileTree.cleanResourcePath(a),c=k.FileTree.cleanResourcePath(c);return k.FileTree.createResourcePath(c+"/"+a)};h.w2popup.open({title:g,
body:t.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eSave\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:500,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){t.init();E()},200)},onClose:function(a){console.log("close")},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){E()}},onMin:function(a){console.log("min");
b(window).trigger("resize");a.onComplete=function(){E()}},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){if(e){var a=J();e(a)}h.w2popup.close()});b("#dialogCancel").click(function(){if(d){var a=J();d(a)}h.w2popup.close()});null!=a&&(b("#dialogFolder").html(k.FileTree.cleanResourcePath(a.projectDirectory)),f||b("#dialogPath").html(k.FileTree.cleanResourcePath(a.fileName)));k.FileTree.createTree(l,"dialog","dialogTree",v,c,null,function(a,c){var d=k.FileTree.createResourcePath(c.node.tooltip);
c.node.isFolder()?b("#dialogFolder").html(k.FileTree.cleanResourcePath(d.projectDirectory)):(b("#dialogFolder").html(k.FileTree.cleanResourcePath(d.projectDirectory)),b("#dialogPath").html(k.FileTree.cleanResourcePath(d.fileName)))})}function y(a,c){var e=M(a?m.Common.escapeHtml(a):""),d=function(){var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()};h.w2popup.open({title:c,body:e.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eEvaluate\x3c/button\x3e',
width:700,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!1,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){e.init();b("#dialog").w2grid({recordTitles:!1,name:"evaluation",columns:[{field:"name",caption:"Name",size:"40%",sortable:!1},{field:"value",caption:"Value",size:"30%",sortable:!1},{field:"type",caption:"Type",size:"30%"}],onClick:function(a){var c=this;a.onComplete=function(){var a=c.getSelection();if(1==a.length){var a=c.get(a[0]),d=b("#dialogPath").html(),
d=m.Common.clearHtml(d);D.VariableManager.toggleExpandEvaluation(a.path,d)}c.selectNone();c.refresh()}}});d();setTimeout(function(){D.VariableManager.showVariables()},200)},200)},onClose:function(a){h.w2ui.evaluation.destroy();D.VariableManager.clearEvaluation();C.Command.browseScriptEvaluation([],"",!0)},onMax:function(a){a.onComplete=function(){h.w2ui.evaluation.refresh();d()};b(window).trigger("resize")},onMin:function(a){a.onComplete=function(){h.w2ui.evaluation.refresh();d()};b(window).trigger("resize")},
onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){var a=b("#dialogPath").html(),a=m.Common.clearHtml(a);C.Command.browseScriptEvaluation([],a,!0)})}function F(a){for(var c="\x3ctable id\x3d'dialogListTable' class\x3d'dialogListTable' width\x3d'100%'\x3e",e=z(),d={},f={},g=0;g<a.length;g++){var l="dialogListEntry"+g,v=a[g],c=c+"\x3ctr ";g==e&&(c+=" class\x3d'dialogListTableRowSelected' ");for(var c=c+(" id\x3d'"+l+"'\x3e"),l=function(){var a=v[t],b="listEntry_"+g+"_"+
t;0<t&&(c+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x3c/td\x3e");c+="\x3ctd width\x3d'50%'\x3e\x3cdiv id\x3d'"+b+"' class\x3d'";c+=a.style;c+="'\x3e";c+=a.text;c+="\x3c/div\x3e\x3c/td\x3e";f[g]=function(){return a.decompile?N(a.link):a.line?K(a.resource,a.line):K(a.link)}},t=0;t<v.length;t++)l();c+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e";c+="\x3c/tr\x3e"}c+="\x3c/table\x3e";return{content:c,init:function(){var a=function(){if(f.hasOwnProperty(c)){var a=f[c];b("#dialogListEntry"+c).on("click",
function(b){return a()})}},c;for(c in f)a();var a=function(){if(d.hasOwnProperty(e)){var a=d[e],c=e;b("#dialogListEntry"+c).on("mouseenter",function(b){return a(c)})}},e;for(e in d)a()}}}function w(a){13===(a||window.event).keyCode?(a=z(),0<=a&&b("#dialogListEntry"+a).click()):40===(a||window.event).keyCode?(a=z(),-1==a?A(a,0):A(a,a+1)):38===(a||window.event).keyCode&&(a=z(),-1==a?A(a,0):A(a,a-1))}function A(a,b){var c=document.getElementById("dialogListEntry"+a),d=document.getElementById("dialogListEntry"+
b);if(d){var f=document.getElementById("dialog"),g=m.Common.calculateScrollOffset(f,d);console.log("offset: "+g);c&&(c.className="");f.scrollTop+=g;d.className="dialogListTableRowSelected"}}function z(){var a=document.getElementById("dialogListTable");if(a)for(var a=a.rows,b=0;b<a.length;b++){var e=a[b];if(e&&e.classList.contains("dialogListTableRowSelected"))return a=e.id.replace("dialogListEntry",""),parseInt(a)}return-1}function M(a){a||(a="");return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+
a+"\x3c/div\x3e",init:function(){b("#dialogPath").on("click",function(a){return p("dialogPath")});b("#dialogPath").on("paste",function(a){return q("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){w(a);return x(a)})}}}function O(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',init:function(){b("#dialogPath").on("click",function(a){return p("dialogPath")});
b("#dialogPath").on("paste",function(a){return q("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){w(a);return x(a)})}}}function P(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',init:function(){b("#dialogPath").on("click",function(a){return p("dialogPath")});b("#dialogPath").on("paste",function(a){return q("dialogPath",a)});b("#w2ui-popup").on("keydown",
function(a){w(a);return x(a)})}}}function L(a,c){a||(a="");c||(c="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogFolder"\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+c+"\x3c/div\x3e",init:function(){b("#dialogPath").on("click",function(a){return p("dialogPath")});b("#dialogPath").on("paste",function(a){return q("dialogPath",a)});b("#w2ui-popup").on("keydown",
function(a){w(a);return x(a)})}}}function Q(a,c,e){c||(c="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchFileFilterInputBox" contenteditable\x3d"true""\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchValueInputBox" contenteditable\x3d"true""\x3e'+c+'\x3c/div\x3e\n\x3cdiv class\x3d"searchCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return p("fileFilterPatterns")});b("#fileFilterPatterns").on("paste",function(a){return q("fileFilterPatterns",a)});b("#searchText").on("click",function(a){return p("searchText")});b("#searchText").on("paste",function(a){return q("searchText",a)});b("#inputCaseSensitiveRow").on("click",function(a){B("inputCaseSensitive");e();return!1});b("#inputRegularExpressionRow").on("click",function(a){B("inputRegularExpression");e();return!1});b("#w2ui-popup").on("keydown",
function(a){w(a);return x(a)})}}}function R(a,c,e){c||(c="");return{content:'\x3cdiv id\x3d"dialogContainerSmall"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchAndReplaceFileFilterInputBox" contenteditable\x3d"true""\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchAndReplaceValueInputBox" contenteditable\x3d"true"\x3e'+c+'\x3c/div\x3e\n\x3cdiv id\x3d"replaceText" class\x3d"searchAndReplaceInputBox" contenteditable\x3d"true"\x3e\x3c/div\x3e\n\x3cdiv class\x3d"searchAndReplaceCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return p("fileFilterPatterns")});b("#fileFilterPatterns").on("paste",function(a){return q("fileFilterPatterns".e)});b("#searchText").on("click",function(a){return p("searchText")});b("#searchText").on("paste",function(a){return q("searchText",a)});b("#replaceText").on("click",function(a){return p("replaceText")});b("#replaceText").on("paste",function(a){return q("replaceText",a)});b("#inputCaseSensitiveRow").on("click",function(a){B("inputCaseSensitive");
e();return!1});b("#inputRegularExpressionRow").on("click",function(a){B("inputRegularExpression");e();return!1});b("#w2ui-popup").on("keydown",function(a){w(a);return x(a)})}}}function K(a,c){b("#dialogCancel").click();c?H.FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){I.FileEditor.showEditorLine(c)},100)}):location.href=a;return!1}function N(a){b("#dialogCancel").click();H.FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){I.FileEditor.showEditorLine(line)},
100)});return!1}function p(a){document.getElementById(a).contentEditable=!0;document.getElementById(a).focus();document.getElementById(a).focus();return!0}function q(a,b){if(b&&b.originalEvent){var c=b.originalEvent.clipboardData.getData("text/plain"),d=document.getElementById(a);if(c&&d)return c=c.replace(/[\n\r]/g,""),c=m.Common.escapeHtml(c),d.innerHTML=c,!1}return!0}function G(a,c,e,d){setTimeout(function(){var e=b("#"+c).html();a==e?d():console.log("Ignoring '"+a+"' as its not current")},e)}
function r(a){return(a=document.getElementById(a))?a.checked:!1}function B(a){if(a=document.getElementById(a))a.checked=!a.checked;return!1}function x(a){if(13===(a||window.event).keyCode)return b("#dialogSave").click(),!1}n.openTreeDialog=function(a,b,e,d){null!=a?u(a,b,e,d,!1,"Save Changes","/"+document.title):u(a,b,e,d,!1,"Save As","/"+document.title)};n.renameFileTreeDialog=function(a,b,e,d){u(a,b,e,d,!1,"Rename File","/"+document.title)};n.renameDirectoryTreeDialog=function(a,b,e,d){u(a,b,e,
d,!1,"Rename Directory","/"+document.title)};n.newFileTreeDialog=function(a,b,e,d){u(a,b,e,d,!0,"New File","/"+document.title)};n.newDirectoryTreeDialog=function(a,b,e,d){u(a,b,e,d,!0,"New Directory","/"+document.title)};n.evaluateExpressionDialog=function(a){y(a,"Evaluate Expression")};n.createTreeOpenDialog=function(a,c,e,d,f){var g=P(),l=function(){var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()};h.w2popup.open({title:e,body:g.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3e'+
d+"\x3c/button\x3e",width:500,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){g.init();l()},200)},onClose:function(a){c()},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){l()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){l()}},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){var c=b("#dialogPath").html(),
c=k.FileTree.cleanResourcePath(c),c=k.FileTree.createResourcePath(c),d=c.projectDirectory;0==d.indexOf("/")&&(d=d.substring(1));a(c,d);h.w2popup.close()});k.FileTree.createTreeOfDepth(f,"dialog","dialogTree","/"+document.title,!0,null,function(a,c){var d=k.FileTree.createResourcePath(c.node.tooltip).projectDirectory;0==d.indexOf("/")&&(d=d.substring(1));b("#dialogPath").html(k.FileTree.cleanResourcePath(d))},2)};n.createListDialog=function(a,c,e){var d=O(),f=function(){var a=document.getElementById("dialogPath");
a.contentEditable=!0;a.focus()};h.w2popup.open({title:e,body:d.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(e){setTimeout(function(){d.init();b("#dialogPath").on("change keyup paste",function(){var d=b("#dialogPath").html();G(d,"dialogPath",300,function(){var e=null;c&&(e=b("#dialogFolder").html(),e=m.Common.clearHtml(e));
d&&(d=m.Common.clearHtml(d));a(d,e,function(a,c){var d=b("#dialogPath").html();c&&c!=d||(d=F(a),d.content?b("#dialog").html(d.content):b("#dialog").html(""),d.init&&setTimeout(d.init,100))})})});f()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){f()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){f()}}});b("#dialogSave").click(function(){h.w2popup.close()});b("#dialogCancel").click(function(){h.w2popup.close()})};
n.createTextSearchOnlyDialog=function(a,c,e){var d=function(){var a=document.getElementById("searchText");a.contentEditable=!0;a.focus()},f=function(){var d=b("#searchText").html();G(d,"searchText",300,function(){var e={caseSensitive:r("inputCaseSensitive"),regularExpression:r("inputRegularExpression"),wholeWord:r("inputWholeWord")},l=null;c&&(l=b("#fileFilterPatterns").html(),l=m.Common.clearHtml(l));d&&(d=m.Common.clearHtml(d));a(d,l,e,function(a,c){var d=b("#searchText").html();c&&d!=c||(d=F(a),
d.content?b("#dialog").html(d.content):b("#dialog").html(""),d.init&&setTimeout(d.init,100))})})},g=Q(c,"",f);h.w2popup.open({title:e,body:g.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){g.init();b("#searchText").on("change keyup paste",f);d()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");
a.onComplete=function(){d()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){d()}}});b("#dialogSave").click(function(){h.w2popup.close()});b("#dialogCancel").click(function(){h.w2popup.close()})};n.createTextSearchAndReplaceDialog=function(a,c,e){var d=function(){var a=document.getElementById("searchText");a.contentEditable=!0;a.focus()},f=function(){var d=b("#searchText").html();G(d,"searchText",300,function(){var e={caseSensitive:r("inputCaseSensitive"),
regularExpression:r("inputRegularExpression"),wholeWord:r("inputWholeWord")},f=null;c&&(f=b("#fileFilterPatterns").html(),f=m.Common.clearHtml(f));d&&(d=m.Common.clearHtml(d));a(d,f,e,function(a,d){var c=b("#searchText").html();d&&c!=d||(c=F(a),c.content?b("#dialog").html(c.content):b("#dialog").html(""),c.init&&setTimeout(c.init,100))})})},g=R(c,"",f);h.w2popup.open({title:e,body:g.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eReplace\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',
width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){g.init();b("#searchText").on("change keyup paste",f);d()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){d()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){d()}}});b("#dialogSave").click(function(){var a=b("#searchText").html(),c=b("#replaceText").html(),d=
b("#fileFilterPatterns").html(),c={caseSensitive:r("inputCaseSensitive"),regularExpression:r("inputRegularExpression"),wholeWord:r("inputWholeWord"),enableReplace:!0,replace:c};C.Command.replaceTokenInFiles(a,c,d);h.w2popup.close()});b("#dialogCancel").click(function(){h.w2popup.close()})}})(y.DialogBuilder||(y.DialogBuilder={}))});
