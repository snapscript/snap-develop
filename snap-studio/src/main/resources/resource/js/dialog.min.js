define("require exports jquery w2ui common commands variables explorer editor tree".split(" "),function(U,x,b,k,n,B,C,L,M,g){(function(p){function u(a,b,c,e,h,f){x(a,b,c,e,h,f,"/"+document.title)}function x(a,d,c,e,h,f,D){var m=b(window).height(),l=b(window).width(),E="/";null!=a&&(E=a.getProjectDirectory());var I=N(E,""),F=function(){var a=document.getElementById("dialogPath");a.contentEditable="true";a.focus()},J=function(){var a=b("#dialogPath").html(),d=b("#dialogFolder").html(),a=g.FileTree.cleanResourcePath(a),
d=g.FileTree.cleanResourcePath(d);return g.FileTree.createResourcePath(d+"/"+a)};k.w2popup.open({title:f,body:I.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eSave\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:Math.max(500,l/2),height:Math.max(400,m/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){I.init();F()},200)},onClose:function(a){console.log("close")},
onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){F()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){F()}},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){if(c){var a=J();c(a)}k.w2popup.close()});b("#dialogCancel").click(function(){if(e){var a=J();e(a)}k.w2popup.close()});null!=a&&(b("#dialogFolder").html(g.FileTree.cleanResourcePath(a.getProjectDirectory())),h||b("#dialogPath").html(g.FileTree.cleanResourcePath(a.getFileName())));
g.FileTree.createTree(D,"dialog","dialogTree",E,d,null,function(a,d){var e=g.FileTree.createResourcePath(d.node.tooltip);d.node.isFolder()?b("#dialogFolder").html(g.FileTree.cleanResourcePath(e.getProjectDirectory())):(b("#dialogFolder").html(g.FileTree.cleanResourcePath(e.getProjectDirectory())),b("#dialogPath").html(g.FileTree.cleanResourcePath(e.getFileName())))})}function O(a,d){var c=b(window).height(),e=b(window).width(),h=P(a?n.Common.escapeHtml(a):""),f=function(){var a=document.getElementById("dialogPath");
a.contentEditable="true";a.focus()};k.w2popup.open({title:d,body:h.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eEvaluate\x3c/button\x3e',width:Math.max(700,e/2),height:Math.max(400,c/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!1,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){h.init();b("#dialog").w2grid({recordTitles:!1,name:"evaluation",columns:[{field:"name",caption:"Name",size:"40%",sortable:!1},{field:"value",caption:"Value",
size:"30%",sortable:!1},{field:"type",caption:"Type",size:"30%"}],onClick:function(a){var d=this;a.onComplete=function(){var a=d.getSelection();if(1==a.length){var a=d.get(a[0]),e=b("#dialogPath").html(),e=n.Common.clearHtml(e);C.VariableManager.toggleExpandEvaluation(a.path,e)}d.selectNone();d.refresh()}}});f();setTimeout(function(){C.VariableManager.showVariables()},200)},200)},onClose:function(a){k.w2ui.evaluation.destroy();C.VariableManager.clearEvaluation();B.Command.browseScriptEvaluation([],
"",!0)},onMax:function(a){a.onComplete=function(){k.w2ui.evaluation.refresh();f()};b(window).trigger("resize")},onMin:function(a){a.onComplete=function(){k.w2ui.evaluation.refresh();f()};b(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){var a=b("#dialogPath").html(),a=n.Common.clearHtml(a);B.Command.browseScriptEvaluation([],a,!0)})}function G(a){for(var d="\x3ctable id\x3d'dialogListTable' class\x3d'dialogListTable' width\x3d'100%'\x3e",
c=y(),e={},h={},f=0;f<a.length;f++){var k="dialogListEntry"+f,m=a[f],d=d+"\x3ctr ";f==c&&(d+=" class\x3d'dialogListTableRowSelected' ");for(var d=d+(" id\x3d'"+k+"'\x3e"),k=function(){var a=m[l],b="listEntry_"+f+"_"+l;0<l&&(d+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x3c/td\x3e");d+="\x3ctd width\x3d'50%' nowrap\x3e\x3cdiv id\x3d'"+b+"' class\x3d'";d+=a.style;d+="'\x3e";d+=a.text;d+="\x3c/div\x3e\x3c/td\x3e";h[f]=function(){return a.line?K(a.resource,a.line):K(a.link)}},l=0;l<m.length;l++)k();d+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e";
d+="\x3c/tr\x3e"}d+="\x3c/table\x3e";return{content:d,init:function(){var a=function(){if(h.hasOwnProperty(d)){var a=h[d];b("#dialogListEntry"+d).on("click",function(b){return a()})}},d;for(d in h)a();var a=function(){if(e.hasOwnProperty(c)){var a=e[c],d=c;b("#dialogListEntry"+d).on("mouseenter",function(b){return a(d)})}},c;for(c in e)a()}}}function v(a){13===(a||window.event).keyCode?(a=y(),0<=a&&b("#dialogListEntry"+a).click()):40===(a||window.event).keyCode?(a=y(),-1==a?z(a,0):z(a,a+1)):38===
(a||window.event).keyCode&&(a=y(),-1==a?z(a,0):z(a,a-1))}function z(a,b){var d=document.getElementById("dialogListEntry"+a),e=document.getElementById("dialogListEntry"+b);if(e){var h=document.getElementById("dialog"),f=n.Common.calculateScrollOffset(h,e);console.log("offset: "+f);d&&(d.className="");h.scrollTop+=f;e.className="dialogListTableRowSelected"}}function y(){var a=document.getElementById("dialogListTable");if(a)for(var a=a.rows,b=0;b<a.length;b++){var c=a[b];if(c&&c.classList.contains("dialogListTableRowSelected"))return a=
c.id.replace("dialogListEntry",""),parseInt(a)}return-1}function P(a){a||(a="");return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+a+"\x3c/div\x3e",init:function(){b("#dialogPath").on("click",function(a){return q("dialogPath")});b("#dialogPath").on("paste",function(a){return r("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){v(a);return w(a)})}}}function Q(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',
init:function(){b("#dialogPath").on("click",function(a){return q("dialogPath")});b("#dialogPath").on("paste",function(a){return r("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){v(a);return w(a)})}}}function R(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',init:function(){b("#dialogPath").on("click",function(a){return q("dialogPath")});
b("#dialogPath").on("paste",function(a){return r("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){v(a);return w(a)})}}}function N(a,d){a||(a="");d||(d="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogFolder"\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+d+"\x3c/div\x3e",init:function(){b("#dialogPath").on("click",function(a){return q("dialogPath")});
b("#dialogPath").on("paste",function(a){return r("dialogPath",a)});b("#w2ui-popup").on("keydown",function(a){v(a);return w(a)})}}}function S(a,d,c){d||(d="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchFileFilterInputBox" contenteditable\x3d"true""\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchValueInputBox" contenteditable\x3d"true""\x3e'+d+'\x3c/div\x3e\n\x3cdiv class\x3d"searchCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return q("fileFilterPatterns")});b("#fileFilterPatterns").on("paste",function(a){return r("fileFilterPatterns",a)});b("#searchText").on("click",function(a){return q("searchText")});b("#searchText").on("paste",function(a){return r("searchText",a)});b("#inputCaseSensitiveRow").on("click",function(a){A("inputCaseSensitive");c();return!1});b("#inputRegularExpressionRow").on("click",function(a){A("inputRegularExpression");c();return!1});b("#w2ui-popup").on("keydown",
function(a){v(a);return w(a)})}}}function T(a,d,c){d||(d="");return{content:'\x3cdiv id\x3d"dialogContainerSmall"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchAndReplaceFileFilterInputBox" contenteditable\x3d"true""\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchAndReplaceValueInputBox" contenteditable\x3d"true"\x3e'+d+'\x3c/div\x3e\n\x3cdiv id\x3d"replaceText" class\x3d"searchAndReplaceInputBox" contenteditable\x3d"true"\x3e\x3c/div\x3e\n\x3cdiv class\x3d"searchAndReplaceCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return q("fileFilterPatterns")});b("#fileFilterPatterns").on("paste",function(a){return r("fileFilterPatterns",a)});b("#searchText").on("click",function(a){return q("searchText")});b("#searchText").on("paste",function(a){return r("searchText",a)});b("#replaceText").on("click",function(a){return q("replaceText")});b("#replaceText").on("paste",function(a){return r("replaceText",a)});b("#inputCaseSensitiveRow").on("click",function(a){A("inputCaseSensitive");
c();return!1});b("#inputRegularExpressionRow").on("click",function(a){A("inputRegularExpression");c();return!1});b("#w2ui-popup").on("keydown",function(a){v(a);return w(a)})}}}function K(a,d){b("#dialogCancel").click();d?L.FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){M.FileEditor.showEditorLine(d)},100)}):location.href=a;return!1}function q(a){document.getElementById(a).contentEditable="true";document.getElementById(a).focus();document.getElementById(a).focus();return!0}function r(a,
b){if(b&&b.originalEvent){var d=b.originalEvent.clipboardData.getData("text/plain"),e=document.getElementById(a);if(d&&e)return d=d.replace(/[\n\r]/g,""),d=n.Common.escapeHtml(d),e.innerHTML=d,!1}return!0}function H(a,d,c,e){setTimeout(function(){var c=b("#"+d).html();a==c?e():console.log("Ignoring '"+a+"' as its not current")},c)}function t(a){return(a=document.getElementById(a))?a.checked:!1}function A(a){if(a=document.getElementById(a))a.checked=!a.checked;return!1}function w(a){if(13===(a||window.event).keyCode)return b("#dialogSave").click(),
!1}p.evaluateExpressionDialog=function(a){O(a,"Evaluate Expression")};p.openTreeDialog=function(a,b,c,e){null!=a?u(a,b,c,e,!1,"Save Changes"):u(a,b,c,e,!1,"Save As")};p.renameFileTreeDialog=function(a,b,c,e){u(a,b,c,e,!1,"Rename File")};p.renameDirectoryTreeDialog=function(a,b,c,e){u(a,b,c,e,!1,"Rename Directory")};p.newFileTreeDialog=function(a,b,c,e){u(a,b,c,e,!0,"New File")};p.newDirectoryTreeDialog=function(a,b,c,e){u(a,b,c,e,!0,"New Directory")};p.createArchiveTreeDialog=function(a,b,c){u(a,
!0,b,c,!1,"Create Archive")};p.createTreeOpenDialog=function(a,d,c,e,h){var f=b(window).height(),D=b(window).width(),m=R(),l=function(){var a=document.getElementById("dialogPath");a.contentEditable="true";a.focus()};k.w2popup.open({title:c,body:m.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3e'+e+"\x3c/button\x3e",width:Math.max(500,D/2),height:Math.max(400,f/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){m.init();
l()},200)},onClose:function(a){d()},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){l()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){l()}},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){var d=b("#dialogPath").html(),d=g.FileTree.cleanResourcePath(d),d=g.FileTree.createResourcePath(d),c=d.getProjectDirectory();0==c.indexOf("/")&&(c=c.substring(1));a(d,c);k.w2popup.close()});g.FileTree.createTreeOfDepth(h,
"dialog","dialogTree","/"+document.title,!0,null,function(a,d){var c=g.FileTree.createResourcePath(d.node.tooltip).getProjectDirectory();0==c.indexOf("/")&&(c=c.substring(1));b("#dialogPath").html(g.FileTree.cleanResourcePath(c))},2)};p.createListDialog=function(a,d,c){var e=b(window).height(),h=b(window).width(),f=Q(),g=function(){var a=document.getElementById("dialogPath");a.contentEditable="true";a.focus()};k.w2popup.open({title:c,body:f.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',
width:Math.max(800,h/2),height:Math.max(400,e/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(c){setTimeout(function(){f.init();b("#dialogPath").on("change keyup paste",function(){var c=b("#dialogPath").html();H(c,"dialogPath",300,function(){var e=null;d&&(e=b("#dialogFolder").html(),e=n.Common.clearHtml(e));c&&(c=n.Common.clearHtml(c));a(c,e,function(a,d){var c=b("#dialogPath").html();d&&d!=c||(c=G(a),c.content?b("#dialog").html(c.content):
b("#dialog").html(""),c.init&&setTimeout(c.init,100))})})});g()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){g()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){g()}}});b("#dialogSave").click(function(){k.w2popup.close()});b("#dialogCancel").click(function(){k.w2popup.close()})};p.createTextSearchOnlyDialog=function(a,d,c){var e=b(window).height(),h=b(window).width(),f=function(){var a=document.getElementById("searchText");
a.contentEditable="true";a.focus()},g=function(){var c=b("#searchText").html();H(c,"searchText",300,function(){var e={caseSensitive:t("inputCaseSensitive"),regularExpression:t("inputRegularExpression"),wholeWord:t("inputWholeWord")},l=null;d&&(l=b("#fileFilterPatterns").html(),l=n.Common.clearHtml(l));c&&(c=n.Common.clearHtml(c));a(c,l,e,function(a,d){var c=b("#searchText").html();d&&c!=d||(c=G(a),c.content?b("#dialog").html(c.content):b("#dialog").html(""),c.init&&setTimeout(c.init,100))})})},m=
S(d,"",g);k.w2popup.open({title:c,body:m.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:Math.max(800,h/2),height:Math.max(400,e/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){m.init();b("#searchText").on("change keyup paste",g);f()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){f()}},onMin:function(a){console.log("min");
b(window).trigger("resize");a.onComplete=function(){f()}}});b("#dialogSave").click(function(){k.w2popup.close()});b("#dialogCancel").click(function(){k.w2popup.close()})};p.createTextSearchAndReplaceDialog=function(a,d,c){var e=b(window).height(),h=b(window).width(),f=function(){var a=document.getElementById("searchText");a.contentEditable="true";a.focus()},g=function(){var c=b("#searchText").html();H(c,"searchText",300,function(){var e={caseSensitive:t("inputCaseSensitive"),regularExpression:t("inputRegularExpression"),
wholeWord:t("inputWholeWord")},f=null;d&&(f=b("#fileFilterPatterns").html(),f=n.Common.clearHtml(f));c&&(c=n.Common.clearHtml(c));a(c,f,e,function(a,d){var c=b("#searchText").html();d&&c!=d||(c=G(a),c.content?b("#dialog").html(c.content):b("#dialog").html(""),c.init&&setTimeout(c.init,100))})})},m=T(d,"",g);k.w2popup.open({title:c,body:m.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eReplace\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',
width:Math.max(800,h/2),height:Math.max(400,e/2),overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){m.init();b("#searchText").on("change keyup paste",g);f()},200)},onMax:function(a){console.log("max");b(window).trigger("resize");a.onComplete=function(){f()}},onMin:function(a){console.log("min");b(window).trigger("resize");a.onComplete=function(){f()}}});b("#dialogSave").click(function(){var a=b("#searchText").html(),c=
b("#replaceText").html(),d=b("#fileFilterPatterns").html(),c={caseSensitive:t("inputCaseSensitive"),regularExpression:t("inputRegularExpression"),wholeWord:t("inputWholeWord"),enableReplace:!0,replace:c};B.Command.replaceTokenInFiles(a,c,d);k.w2popup.close()});b("#dialogCancel").click(function(){k.w2popup.close()})}})(x.DialogBuilder||(x.DialogBuilder={}))});
